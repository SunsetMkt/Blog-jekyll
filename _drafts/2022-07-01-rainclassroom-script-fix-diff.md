---
title: 雨课堂多开刷课脚本Fix，仅提供Diff File
date: 2022-07-01
tags: 前端 法律的边缘 入狱警告 雨课堂 用户脚本 油猴脚本
categories: article
---

## Diff File

```diff
--- "\351\233\250\350\257\276\345\240\202\345\244\232\345\274\200\345\210\267\350\257\276.user.js"	2022-07-01 00:30:18.003044500 +0800
+++ "\351\233\250\350\257\276\345\240\202\345\244\232\345\274\200\345\210\267\350\257\276.fix.user.js"	2022-07-01 00:51:50.922396300 +0800
@@ -1,9 +1,9 @@
 // ==UserScript==
-// @name         雨课堂多开刷课
-// @version      v2.6.1
-// @namespace    www.kdjack.cn
-// @description  说明: 本脚本部分功能会要求用户注册,如介意请勿下载使用,谢谢~!刷课功能可使用游客身份.如有BUG/疑问或需要帮助,请反馈或者联系作者
-// @author       KDJack
+// @name         雨课堂多开刷课Fix
+// @version      v2.6.1.fix
+// @namespace    www.sunsets-deprecated-domain-attention.top
+// @description  向开发者KDJack致以崇高的敬意
+// @author       KDJack&sunsets-deprecated-username
 // @license      MIT
 // @resource     elementUI https://unpkg.com/element-ui@2.14.1/lib/theme-chalk/index.css
 // @require      https://unpkg.com/vue@2.5.16/dist/vue.min.js
@@ -14,7 +14,7 @@
 // @grant        GM_getResourceText
 // @grant        GM_xmlhttpRequest
 // @grant        GM_setClipboard
-// @connect      ykt.kdjack.cn
+// @connect      ykt.sunsets-deprecated-domain-attention.top
 // @match        https://*.yuketang.cn/*
 // @match        https://*.xuetangx.com/pro/*
 // @match        https://examination.xuetangx.com/*
@@ -29,8 +29,42 @@
 // 更新时间: 2022-04-10 14:44:59
 // 版本: v2.6.1
 // ****************************************************************************************
+// 补充说明:
+// 此修改版脚本用于应对雨课堂2022.06.17更新的针对此脚本的检测，其具体检测逻辑为：
+// 1. 检测 #scriptBtn 元素，若存在则移除并弹出警告
+// 2. 检测 localStorage 中含有 __ykt_play__ 关键字项目的存在或添加，若存在则弹出警告
+// 所有联机功能均已无法使用，API地址已被替换为无效地址，避免信息泄露
+// Append: sunsets-deprecated-username
+// Time: 2022-07-01 00:15:00
+// Version: v2.6.1.fix
+// ****************************************************************************************
 // ==/UserScript==

+// 生成浏览器指纹，用于针对每个浏览器生成不同且唯一的标识
+// 生成标识替代被检测的关键字，避免被检测
+function getBrowserFingerprint() {
+  var fingerprint = "";
+  var userAgent = navigator.userAgent;
+  var language = navigator.language;
+  var timezone = new Date().getTimezoneOffset();
+
+  fingerprint += userAgent + "|" + language + "|" + timezone;
+
+  // hash并以英文字符表示
+  var hash = 0;
+  for (var i = 0; i < fingerprint.length; i++) {
+    hash = (hash << 5) - hash + fingerprint.charCodeAt(i);
+    hash = hash & hash;
+  }
+  var hashStr = "";
+  for (var i = 0; i < 3; i++) {
+    var val = hash >>> (i * 8) & 0xFF;
+    hashStr += ("00" + val.toString(16)).substr(-2);
+  }
+  return hashStr.toUpperCase();
+}
+
+
 // 加载样式
 GM_addStyle(GM_getResourceText('elementUI'));
 GM_addStyle(GM_getResourceText('swiperCss'));
@@ -661,19 +695,19 @@
 /* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return httpTimeout; });
 /* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return qqGroupNumber; });
 // 本地存储的KEY前缀
-var storageSettingKey = '__ykt_play__setting';
+var storageSettingKey = getBrowserFingerprint()+'setting';

 // 本地存储的用户Key前缀
-var storageUserKey = '__ykt_play__user__';
+var storageUserKey = getBrowserFingerprint()+'user__';

 // 上传题的前缀
-var storageUploadKey = '__ykt_play__upload__';
+var storageUploadKey = getBrowserFingerprint()+'upload__';

 // token前缀
-var storageTokenlKey = '__ykt_play__token__';
+var storageTokenlKey = getBrowserFingerprint()+'token__';

 // 服务器请求地址
-var serviceBaseUrl = 'https://ykt.kdjack.cn/api';
+var serviceBaseUrl = 'https://ykt.sunsets-deprecated-domain-attention.top/api';

 // 版本号
 var version = "v2.6.1";
@@ -3062,14 +3096,14 @@
         return false;
       }
       // 增加按钮存在校验
-      if (document.getElementById('scriptBtn') && document.getElementById('scriptBtn').children && document.getElementById('scriptBtn').children.length > 0) return;
+      if (document.getElementById(getBrowserFingerprint()) && document.getElementById(getBrowserFingerprint()).children && document.getElementById(getBrowserFingerprint()).children.length > 0) return;
       switch (this.platformType) {
         case 1:
           ulDom = document.getElementsByClassName('left-nav')[0].getElementsByClassName('nav-item nav-hover');
           liDom = ulDom[ulDom.length - 1].cloneNode(true);
           liDom.classList.remove('active');
           // liDom.removeAttribute('id')
-          liDom.setAttribute('id', 'scriptBtn');
+          liDom.setAttribute('id', getBrowserFingerprint());
           liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi');
           liDom.getElementsByTagName('div')[0].innerText = '挂机脚本';
           liDom.onclick = this.showSettingPanel;
@@ -3078,7 +3112,7 @@
         case 2:
           ulDom = document.getElementsByClassName('left__menu')[0].getElementsByTagName('ul')[0];
           liDom = ulDom.children[ulDom.children.length - 1].cloneNode(true);
-          liDom.setAttribute('id', 'scriptBtn');
+          liDom.setAttribute('id', getBrowserFingerprint());
           liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi');
           liDom.getElementsByTagName('span')[0].innerText = '挂机脚本';
           liDom.onclick = this.showSettingPanel;
@@ -3112,7 +3146,7 @@
     loopShowGuide: function loopShowGuide() {
       var _this5 = this;

-      if (!document.getElementById('scriptBtn')) {
+      if (!document.getElementById(getBrowserFingerprint())) {
         setTimeout(function () {
           _this5.loopShowGuide();
         }, 500);
@@ -3120,7 +3154,7 @@
       }
       // 创建一个引导
       this.localDriver = this.$guide.show([{
-        element: '#scriptBtn',
+        element: '#'+getBrowserFingerprint(),
         popover: {
           title: '点击这里开始',
           description: '挂机脚本按钮已迁移到这里了~!',
@@ -7315,7 +7349,7 @@
   data: function data() {
     return {
       showDialog: false,
-      teachImgList: ['https://sources.kdjack.cn/yky/teach-cn.png', 'https://sources.kdjack.cn/ykt/teach-en.png'],
+      teachImgList: ['https://sources.sunsets-deprecated-domain-attention.top/yky/teach-cn.png', 'https://sources.sunsets-deprecated-domain-attention.top/ykt/teach-en.png'],
       sessionForm: {
         sessionId: ''
       },
@@ -7593,7 +7627,7 @@
       videoSetForm: {},
       pptSetForm: {},
       examSetForm: {},
-      payImgList: ['https://sources.kdjack.cn/pay_wx.png', 'https://sources.kdjack.cn/pay_zfb.png']
+      payImgList: ['https://sources.sunsets-deprecated-domain-attention.top/pay_wx.png', 'https://sources.sunsets-deprecated-domain-attention.top/pay_zfb.png']
     };
   },

@@ -13236,7 +13270,7 @@


 // module
-exports.push([module.i, "\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\n}\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\n}\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\n}\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\n}\n.setting-deawer .el-collapse {\r\n  border: none;\n}\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\n}\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\n}\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: start;\r\n      justify-content: flex-start;\n}\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #dbdbdb;\n}\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\n}\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\n}\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\n}\n.el-collapse-item__header.is-active {\r\n  border: none !important;\n}\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\n}\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\n}\n.form-cell-item {\r\n  width: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\n}\n.form-cell-item > span {\r\n  min-width: 120px;\n}\n.form-cell-item > .el-input-number {\r\n  width: 180px;\n}\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\n}\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\n}\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\n}\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/setting.vue"],"names":[],"mappings":";AA8TA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;;EAEA,8BAAA;CACA;AACA;EACA,eAAA;EACA,uBAAA;EACA,aAAA;EACA,iCAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,qBAAA;MAAA,4BAAA;CACA;AACA;EACA,iBAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;EACA,mBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,gBAAA;EACA,iBAAA;EACA,wBAAA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,wBAAA;CACA;AACA;EACA,iCAAA;CACA;AACA;EACA,eAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,qBAAA;EACA,mBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,aAAA;EACA,wBAAA;EACA,eAAA;EACA,kBAAA;CACA;AACA;;EAEA,oBAAA;EACA,eAAA;EACA,aAAA;CACA;AACA;EACA,wBAAA;EACA,wBAAA;EACA,0BAAA;CACA;AACA;EACA,gBAAA;EACA,gBAAA;CACA","file":"setting.vue","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 弹框抽屉 -->\r\n    <el-drawer class=\"setting-deawer\" direction=\"ltr\" :size=\"400\" :withHeader=\"false\" :visible.sync=\"isShowDrawer\" @close=\"drawerClose\">\r\n      <el-scrollbar style=\"height:100%\">\r\n        <div class=\"info-form\">\r\n          <!-- 顶部用户信息 -->\r\n          <topInfo></topInfo>\r\n          <!-- 功能列表 -->\r\n          <el-collapse>\r\n            <!-- 窗口设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-menu\"></i> 窗口设置\r\n                  </div>\r\n                  <span>{{ windowSetForm.count + '个窗口 / 超时等待' + windowSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  窗口数量(个)\r\n                  <el-tooltip v-if=\"!isLogin\" class=\"item\" effect=\"dark\" content=\"登录后解锁无限弹窗~!\" placement=\"top\">\r\n                    <i style=\"cursor: pointer; color: #ec681c; font-size: 15px; font-weight: bold;\" class=\"el-icon-lock\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"windowSetForm.count\" :min=\"1\" :max=\"isLogin ? 99 : 4\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  加载等待(秒)\r\n                  <el-tooltip effect=\"dark\" content=\"弹出的窗口，超过加载等待时间还未加载出来的话，就切换下一个课时了~!\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number size=\"mini\" v-model=\"windowSetForm.waitTime\" :min=\"10\" :max=\"120\"></el-input-number>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 视频设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'video'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-operation\"></i> 视频设置\r\n                  </div>\r\n                  <span>{{ 'x' + videoSetForm.ratio + (videoSetForm.mute ? ' / 静音' : '') }}</span>\r\n                  <!--  + (videoSetForm.autoStart ? ' / 自动播放' : '') + (videoSetForm.autoNext && pageType === 10 ? ' / 自动下一个' : '') -->\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  播放速率\r\n                  <el-tooltip effect=\"dark\" content=\"每个学校限制不一样，如果出现视频抽搐、卡顿，则说明被限速了，请降低速度，刷新浏览器再试~! \" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"videoSetForm.ratio\" :precision=\"1\" :step=\"0.5\" :min=\"0.5\" :max=\"2\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>是否静音</span>\r\n                <el-switch v-model=\"videoSetForm.mute\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"videoSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <!-- <div class=\"form-cell-item\" v-if=\"pageLevel === 3\">\r\n              <span>\r\n                自动下一个\r\n                <el-tooltip effect=\"dark\" content=\"V2版本的雨课堂，请到课时列表运行脚本体验~!\" placement=\"top-start\">\r\n                  <i class=\"el-icon-warning-outline\"></i>\r\n                </el-tooltip>\r\n              </span>\r\n              <el-switch :disabled=\"pageType !== 10\" v-model=\"videoSetForm.autoNext\" active-color=\"#f56b1a\"></el-switch>\r\n            </div> -->\r\n            </el-collapse-item>\r\n            <!-- PPT设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'ppt'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-picture\"></i> PPT设置\r\n                  </div>\r\n                  <span>{{ '每页停留' + pptSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>每页停留(秒)</span>\r\n                <el-input-number v-model=\"pptSetForm.waitTime\" :min=\"5\" :max=\"300\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"pptSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 讨论/答疑 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'taolun'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-opportunity\"></i> 讨论/答疑\r\n                  </div>\r\n                  <span>{{ isLogin ? '努力开发中...' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n              <div></div>\r\n            </el-collapse-item>\r\n            <!-- 作业/习题 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'zuoye'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 作业/习题\r\n                  </div>\r\n                  <span>{{ isLogin ? '前往习题页面，一键传题得积分' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n            </el-collapse-item>\r\n            <!-- 考试设置 -->\r\n            <el-collapse-item :disabled=\"!isLogin\" v-if=\"showType === 'all' || showType === 'kaoshi'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 考试设置\r\n                  </div>\r\n                  <el-button v-if=\"isLogin\" type=\"text\" :disabled=\"true\">请前往作业/习题详情页面体验</el-button>\r\n                  <span v-else>用户未登录</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  屏蔽防切屏\r\n                  <el-tooltip effect=\"dark\" content=\"请前往考试页面，根据步骤手动操作~! (仅限谷歌内核的浏览器)\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-button type=\"text\" :disabled=\"true\">请前往考试页面体验</el-button>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 赞赏作者 -->\r\n            <el-collapse-item>\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-milk-tea\"></i> 赞赏作者\r\n                  </div>\r\n                  <span>请作者喝杯奶茶（づ￣3￣）づ╭<span style=\"color: #f95b5b;\">❤</span>～</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <el-image style=\"margin-right: 20px;\" :src=\"payImgList[0]\" :preview-src-list=\"payImgList\"></el-image>\r\n                <el-image :src=\"payImgList[1]\" :preview-src-list=\"payImgList\"></el-image>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n          <!-- 提示 -->\r\n          <div class=\"form-cell-item\" v-if=\"isLogin\" style=\"color: red; max-width: 350px; margin: 20px 0;\">\r\n            温馨提示，目前传题、放大镜搜题功能已屏蔽，如有需要，请下载历史版本2.5.5!\r\n          </div>\r\n          <div class=\"bottom-btn\">\r\n            <span v-if=\"iframePlayStatus === 0\" class=\"start-btn\" @click=\"startStudy\">(っ•̀ω•́)っ✎⁾⁾ 开始学习</span>\r\n            <span v-else class=\"start-btn\" @click=\"reStudy\">(っ•̀ω•́)っ✎⁾⁾ 继续学习</span>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n    <div class=\"function-btns\" v-if=\"pageLevel === 2 && iframePlayStatus !== 1\">\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"设置sessionId\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-s-tools\" @click=\"showSessionIdEdit\"></i>\r\n      </el-tooltip>\r\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"批量传题，得积分\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-upload2\" @click=\"showUploadPanel\"></i>\r\n      </el-tooltip> -->\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"使用积分自动答题\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-edit-outline\" @click=\"showAutoAnswerPanel\"></i>\r\n      </el-tooltip> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport topInfo from './components/topInfo.vue'\r\n\r\nexport default {\r\n  components: {\r\n    topInfo\r\n  },\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'isShowDrawer', 'windowSet', 'videoSet', 'pptSet', 'examSet', 'iframePlayStatus', 'pageType']),\r\n    // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT\r\n    // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n    showType() {\r\n      if (this.pageType < 0) return 'all'\r\n      if (this.pageType === 0 || this.pageType === 10) return 'video'\r\n      if (this.pageType === 9) return 'ppt'\r\n      if (this.pageType === 3 || this.pageType === 13) return 'tuwen'\r\n      if (this.pageType === 4 || this.pageType === 14) return 'taolun'\r\n      if (this.pageType === 5 || this.pageType === 15) return 'kaoshi'\r\n      if (this.pageType === 6 || this.pageType === 16) return 'zuoye'\r\n    }\r\n  },\r\n  watch: {\r\n    windowSet(val) {\r\n      this.windowSetForm = Object.assign({}, val)\r\n    },\r\n    videoSet(val) {\r\n      this.videoSetForm = Object.assign({}, val)\r\n    },\r\n    pptSet(val) {\r\n      this.pptSetForm = Object.assign({}, val)\r\n    },\r\n    examSet(val) {\r\n      this.examSetForm = Object.assign({}, val)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isShowSetting: false,\r\n      windowSetForm: {},\r\n      videoSetForm: {},\r\n      pptSetForm: {},\r\n      examSetForm: {},\r\n      payImgList: ['https://sources.kdjack.cn/pay_wx.png', 'https://sources.kdjack.cn/pay_zfb.png']\r\n    }\r\n  },\r\n  methods: {\r\n    drawerClose() {\r\n      this.$store.commit('closeSettingDrawer')\r\n    },\r\n    startStudy(_, isReStudy) {\r\n      // 设置加载类型为刷课\r\n      this.$store.commit('updateIframeType', 1)\r\n      // 先暂停全局窗口\r\n      if (isReStudy) this.$store.commit('changeIframePlayStatus', -1)\r\n      // 保存全局表单数据\r\n      this.$store.commit('changeDataAndToLocal', { windowSet: this.windowSetForm, videoSet: this.videoSetForm, pptSet: this.pptSetForm, examSet: this.examSetForm })\r\n      // 如果是首页\r\n      if (this.pageLevel === 1) {\r\n        this.$message.warning('请选择一个科目后，再开始学习~!')\r\n        return false\r\n      } else if (this.pageLevel === 3) {\r\n        this.$message.success('脚本运行中，到课程列表也面运行脚本可体验更多功能哟~!')\r\n        // 如果是详情页\r\n        // 关闭设置弹框\r\n        this.$store.commit('closeSettingDrawer')\r\n        // 累加一个标记\r\n        this.$store.commit('changeReloadSetFlug')\r\n        return false\r\n      }\r\n      // 清空本地课程列表\r\n      if (!isReStudy) this.$store.commit('clearnClassList')\r\n\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          if (isReStudy) {\r\n            // 通知全局-开始打开视频窗口\r\n            this.$store.commit('changeIframePlayStatus', 1)\r\n          } else {\r\n            // 打开数据加载弹框\r\n            this.$store.commit('showStepLoading')\r\n          }\r\n        }, 300)\r\n      })\r\n    },\r\n    reStudy() {\r\n      this.startStudy(null, true)\r\n    },\r\n    showSessionIdEdit() {\r\n      this.$store.commit('updateIsShowSession', true)\r\n    },\r\n    showUploadPanel() {\r\n      if (!localStorage.getItem('sessionid')) {\r\n        this.showSessionIdEdit()\r\n        return false\r\n      }\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为上传\r\n      this.$store.commit('updateIframeType', 2)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    },\r\n    showAutoAnswerPanel() {\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为答题\r\n      this.$store.commit('updateIframeType', 3)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // 初始化表单\r\n      this.windowSetForm = Object.assign({}, this.windowSet)\r\n      this.videoSetForm = Object.assign({}, this.videoSet)\r\n      this.pptSetForm = Object.assign({}, this.pptSet)\r\n      this.examSetForm = Object.assign({}, this.examSet)\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\r\n}\r\n.setting-deawer .el-collapse {\r\n  border: none;\r\n}\r\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\r\n}\r\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #dbdbdb;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\r\n}\r\n.el-collapse-item__header.is-active {\r\n  border: none !important;\r\n}\r\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\r\n}\r\n.form-cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\r\n}\r\n.form-cell-item > span {\r\n  min-width: 120px;\r\n}\r\n.form-cell-item > .el-input-number {\r\n  width: 180px;\r\n}\r\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\r\n}\r\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\r\n}\r\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n<style scoped>\r\n.setting-deawer {\r\n  pointer-events: auto;\r\n}\r\n.info-form {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #31364d;\r\n}\r\n.bottom-btn {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.start-btn {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n}\r\n.start-btn:hover {\r\n  background: #282f4b;\r\n}\r\n.form-cell-item .el-image {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\r\n}\r\n.function-btns {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 6999;\r\n}\r\n.btn-item {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n}\r\n.btn-item:hover {\r\n  background: #5a5f7a;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\n}\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\n}\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\n}\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\n}\n.setting-deawer .el-collapse {\r\n  border: none;\n}\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\n}\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\n}\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: start;\r\n      justify-content: flex-start;\n}\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #dbdbdb;\n}\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\n}\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\n}\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\n}\n.el-collapse-item__header.is-active {\r\n  border: none !important;\n}\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\n}\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\n}\n.form-cell-item {\r\n  width: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\n}\n.form-cell-item > span {\r\n  min-width: 120px;\n}\n.form-cell-item > .el-input-number {\r\n  width: 180px;\n}\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\n}\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\n}\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\n}\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/setting.vue"],"names":[],"mappings":";AA8TA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;;EAEA,8BAAA;CACA;AACA;EACA,eAAA;EACA,uBAAA;EACA,aAAA;EACA,iCAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,qBAAA;MAAA,4BAAA;CACA;AACA;EACA,iBAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;EACA,mBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,gBAAA;EACA,iBAAA;EACA,wBAAA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,wBAAA;CACA;AACA;EACA,iCAAA;CACA;AACA;EACA,eAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,qBAAA;EACA,mBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,aAAA;EACA,wBAAA;EACA,eAAA;EACA,kBAAA;CACA;AACA;;EAEA,oBAAA;EACA,eAAA;EACA,aAAA;CACA;AACA;EACA,wBAAA;EACA,wBAAA;EACA,0BAAA;CACA;AACA;EACA,gBAAA;EACA,gBAAA;CACA","file":"setting.vue","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 弹框抽屉 -->\r\n    <el-drawer class=\"setting-deawer\" direction=\"ltr\" :size=\"400\" :withHeader=\"false\" :visible.sync=\"isShowDrawer\" @close=\"drawerClose\">\r\n      <el-scrollbar style=\"height:100%\">\r\n        <div class=\"info-form\">\r\n          <!-- 顶部用户信息 -->\r\n          <topInfo></topInfo>\r\n          <!-- 功能列表 -->\r\n          <el-collapse>\r\n            <!-- 窗口设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-menu\"></i> 窗口设置\r\n                  </div>\r\n                  <span>{{ windowSetForm.count + '个窗口 / 超时等待' + windowSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  窗口数量(个)\r\n                  <el-tooltip v-if=\"!isLogin\" class=\"item\" effect=\"dark\" content=\"登录后解锁无限弹窗~!\" placement=\"top\">\r\n                    <i style=\"cursor: pointer; color: #ec681c; font-size: 15px; font-weight: bold;\" class=\"el-icon-lock\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"windowSetForm.count\" :min=\"1\" :max=\"isLogin ? 99 : 4\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  加载等待(秒)\r\n                  <el-tooltip effect=\"dark\" content=\"弹出的窗口，超过加载等待时间还未加载出来的话，就切换下一个课时了~!\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number size=\"mini\" v-model=\"windowSetForm.waitTime\" :min=\"10\" :max=\"120\"></el-input-number>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 视频设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'video'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-operation\"></i> 视频设置\r\n                  </div>\r\n                  <span>{{ 'x' + videoSetForm.ratio + (videoSetForm.mute ? ' / 静音' : '') }}</span>\r\n                  <!--  + (videoSetForm.autoStart ? ' / 自动播放' : '') + (videoSetForm.autoNext && pageType === 10 ? ' / 自动下一个' : '') -->\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  播放速率\r\n                  <el-tooltip effect=\"dark\" content=\"每个学校限制不一样，如果出现视频抽搐、卡顿，则说明被限速了，请降低速度，刷新浏览器再试~! \" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"videoSetForm.ratio\" :precision=\"1\" :step=\"0.5\" :min=\"0.5\" :max=\"2\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>是否静音</span>\r\n                <el-switch v-model=\"videoSetForm.mute\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"videoSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <!-- <div class=\"form-cell-item\" v-if=\"pageLevel === 3\">\r\n              <span>\r\n                自动下一个\r\n                <el-tooltip effect=\"dark\" content=\"V2版本的雨课堂，请到课时列表运行脚本体验~!\" placement=\"top-start\">\r\n                  <i class=\"el-icon-warning-outline\"></i>\r\n                </el-tooltip>\r\n              </span>\r\n              <el-switch :disabled=\"pageType !== 10\" v-model=\"videoSetForm.autoNext\" active-color=\"#f56b1a\"></el-switch>\r\n            </div> -->\r\n            </el-collapse-item>\r\n            <!-- PPT设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'ppt'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-picture\"></i> PPT设置\r\n                  </div>\r\n                  <span>{{ '每页停留' + pptSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>每页停留(秒)</span>\r\n                <el-input-number v-model=\"pptSetForm.waitTime\" :min=\"5\" :max=\"300\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"pptSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 讨论/答疑 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'taolun'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-opportunity\"></i> 讨论/答疑\r\n                  </div>\r\n                  <span>{{ isLogin ? '努力开发中...' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n              <div></div>\r\n            </el-collapse-item>\r\n            <!-- 作业/习题 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'zuoye'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 作业/习题\r\n                  </div>\r\n                  <span>{{ isLogin ? '前往习题页面，一键传题得积分' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n            </el-collapse-item>\r\n            <!-- 考试设置 -->\r\n            <el-collapse-item :disabled=\"!isLogin\" v-if=\"showType === 'all' || showType === 'kaoshi'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 考试设置\r\n                  </div>\r\n                  <el-button v-if=\"isLogin\" type=\"text\" :disabled=\"true\">请前往作业/习题详情页面体验</el-button>\r\n                  <span v-else>用户未登录</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  屏蔽防切屏\r\n                  <el-tooltip effect=\"dark\" content=\"请前往考试页面，根据步骤手动操作~! (仅限谷歌内核的浏览器)\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-button type=\"text\" :disabled=\"true\">请前往考试页面体验</el-button>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 赞赏作者 -->\r\n            <el-collapse-item>\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-milk-tea\"></i> 赞赏作者\r\n                  </div>\r\n                  <span>请作者喝杯奶茶（づ￣3￣）づ╭<span style=\"color: #f95b5b;\">❤</span>～</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <el-image style=\"margin-right: 20px;\" :src=\"payImgList[0]\" :preview-src-list=\"payImgList\"></el-image>\r\n                <el-image :src=\"payImgList[1]\" :preview-src-list=\"payImgList\"></el-image>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n          <!-- 提示 -->\r\n          <div class=\"form-cell-item\" v-if=\"isLogin\" style=\"color: red; max-width: 350px; margin: 20px 0;\">\r\n            温馨提示，目前传题、放大镜搜题功能已屏蔽，如有需要，请下载历史版本2.5.5!\r\n          </div>\r\n          <div class=\"bottom-btn\">\r\n            <span v-if=\"iframePlayStatus === 0\" class=\"start-btn\" @click=\"startStudy\">(っ•̀ω•́)っ✎⁾⁾ 开始学习</span>\r\n            <span v-else class=\"start-btn\" @click=\"reStudy\">(っ•̀ω•́)っ✎⁾⁾ 继续学习</span>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n    <div class=\"function-btns\" v-if=\"pageLevel === 2 && iframePlayStatus !== 1\">\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"设置sessionId\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-s-tools\" @click=\"showSessionIdEdit\"></i>\r\n      </el-tooltip>\r\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"批量传题，得积分\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-upload2\" @click=\"showUploadPanel\"></i>\r\n      </el-tooltip> -->\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"使用积分自动答题\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-edit-outline\" @click=\"showAutoAnswerPanel\"></i>\r\n      </el-tooltip> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport topInfo from './components/topInfo.vue'\r\n\r\nexport default {\r\n  components: {\r\n    topInfo\r\n  },\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'isShowDrawer', 'windowSet', 'videoSet', 'pptSet', 'examSet', 'iframePlayStatus', 'pageType']),\r\n    // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT\r\n    // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n    showType() {\r\n      if (this.pageType < 0) return 'all'\r\n      if (this.pageType === 0 || this.pageType === 10) return 'video'\r\n      if (this.pageType === 9) return 'ppt'\r\n      if (this.pageType === 3 || this.pageType === 13) return 'tuwen'\r\n      if (this.pageType === 4 || this.pageType === 14) return 'taolun'\r\n      if (this.pageType === 5 || this.pageType === 15) return 'kaoshi'\r\n      if (this.pageType === 6 || this.pageType === 16) return 'zuoye'\r\n    }\r\n  },\r\n  watch: {\r\n    windowSet(val) {\r\n      this.windowSetForm = Object.assign({}, val)\r\n    },\r\n    videoSet(val) {\r\n      this.videoSetForm = Object.assign({}, val)\r\n    },\r\n    pptSet(val) {\r\n      this.pptSetForm = Object.assign({}, val)\r\n    },\r\n    examSet(val) {\r\n      this.examSetForm = Object.assign({}, val)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isShowSetting: false,\r\n      windowSetForm: {},\r\n      videoSetForm: {},\r\n      pptSetForm: {},\r\n      examSetForm: {},\r\n      payImgList: ['https://sources.sunsets-deprecated-domain-attention.top/pay_wx.png', 'https://sources.sunsets-deprecated-domain-attention.top/pay_zfb.png']\r\n    }\r\n  },\r\n  methods: {\r\n    drawerClose() {\r\n      this.$store.commit('closeSettingDrawer')\r\n    },\r\n    startStudy(_, isReStudy) {\r\n      // 设置加载类型为刷课\r\n      this.$store.commit('updateIframeType', 1)\r\n      // 先暂停全局窗口\r\n      if (isReStudy) this.$store.commit('changeIframePlayStatus', -1)\r\n      // 保存全局表单数据\r\n      this.$store.commit('changeDataAndToLocal', { windowSet: this.windowSetForm, videoSet: this.videoSetForm, pptSet: this.pptSetForm, examSet: this.examSetForm })\r\n      // 如果是首页\r\n      if (this.pageLevel === 1) {\r\n        this.$message.warning('请选择一个科目后，再开始学习~!')\r\n        return false\r\n      } else if (this.pageLevel === 3) {\r\n        this.$message.success('脚本运行中，到课程列表也面运行脚本可体验更多功能哟~!')\r\n        // 如果是详情页\r\n        // 关闭设置弹框\r\n        this.$store.commit('closeSettingDrawer')\r\n        // 累加一个标记\r\n        this.$store.commit('changeReloadSetFlug')\r\n        return false\r\n      }\r\n      // 清空本地课程列表\r\n      if (!isReStudy) this.$store.commit('clearnClassList')\r\n\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          if (isReStudy) {\r\n            // 通知全局-开始打开视频窗口\r\n            this.$store.commit('changeIframePlayStatus', 1)\r\n          } else {\r\n            // 打开数据加载弹框\r\n            this.$store.commit('showStepLoading')\r\n          }\r\n        }, 300)\r\n      })\r\n    },\r\n    reStudy() {\r\n      this.startStudy(null, true)\r\n    },\r\n    showSessionIdEdit() {\r\n      this.$store.commit('updateIsShowSession', true)\r\n    },\r\n    showUploadPanel() {\r\n      if (!localStorage.getItem('sessionid')) {\r\n        this.showSessionIdEdit()\r\n        return false\r\n      }\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为上传\r\n      this.$store.commit('updateIframeType', 2)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    },\r\n    showAutoAnswerPanel() {\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为答题\r\n      this.$store.commit('updateIframeType', 3)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // 初始化表单\r\n      this.windowSetForm = Object.assign({}, this.windowSet)\r\n      this.videoSetForm = Object.assign({}, this.videoSet)\r\n      this.pptSetForm = Object.assign({}, this.pptSet)\r\n      this.examSetForm = Object.assign({}, this.examSet)\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\r\n}\r\n.setting-deawer .el-collapse {\r\n  border: none;\r\n}\r\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\r\n}\r\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #dbdbdb;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\r\n}\r\n.el-collapse-item__header.is-active {\r\n  border: none !important;\r\n}\r\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\r\n}\r\n.form-cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\r\n}\r\n.form-cell-item > span {\r\n  min-width: 120px;\r\n}\r\n.form-cell-item > .el-input-number {\r\n  width: 180px;\r\n}\r\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\r\n}\r\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\r\n}\r\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n<style scoped>\r\n.setting-deawer {\r\n  pointer-events: auto;\r\n}\r\n.info-form {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #31364d;\r\n}\r\n.bottom-btn {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.start-btn {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n}\r\n.start-btn:hover {\r\n  background: #282f4b;\r\n}\r\n.form-cell-item .el-image {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\r\n}\r\n.function-btns {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 6999;\r\n}\r\n.btn-item {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n}\r\n.btn-item:hover {\r\n  background: #5a5f7a;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13250,7 +13284,7 @@


 // module
-exports.push([module.i, "\n.setting-deawer[data-v-2b2af070] {\r\n  pointer-events: auto;\n}\n.info-form[data-v-2b2af070] {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  background: #31364d;\n}\n.bottom-btn[data-v-2b2af070] {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\n}\n.start-btn[data-v-2b2af070] {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\n}\n.start-btn[data-v-2b2af070]:hover {\r\n  background: #282f4b;\n}\n.form-cell-item .el-image[data-v-2b2af070] {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\n}\n.function-btns[data-v-2b2af070] {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  z-index: 6999;\n}\n.btn-item[data-v-2b2af070] {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\n}\n.btn-item[data-v-2b2af070]:hover {\r\n  background: #5a5f7a;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/setting.vue"],"names":[],"mappings":";AAgaA;EACA,qBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,oBAAA;CACA;AACA;EACA,mBAAA;EACA,YAAA;EACA,eAAA;EACA,UAAA;EACA,qBAAA;EACA,kBAAA;EACA,oBAAA;EACA,qBAAA;EAAA,cAAA;EACA,sBAAA;MAAA,wBAAA;CACA;AACA;EACA,mBAAA;EACA,gBAAA;EACA,oBAAA;EACA,WAAA;EACA,kBAAA;EACA,mBAAA;EACA,gBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,aAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,YAAA;EACA,WAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,cAAA;CACA;AACA;EACA,qBAAA;EACA,cAAA;EACA,gBAAA;EACA,oBAAA;EACA,mBAAA;EACA,eAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,oBAAA;CACA","file":"setting.vue","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 弹框抽屉 -->\r\n    <el-drawer class=\"setting-deawer\" direction=\"ltr\" :size=\"400\" :withHeader=\"false\" :visible.sync=\"isShowDrawer\" @close=\"drawerClose\">\r\n      <el-scrollbar style=\"height:100%\">\r\n        <div class=\"info-form\">\r\n          <!-- 顶部用户信息 -->\r\n          <topInfo></topInfo>\r\n          <!-- 功能列表 -->\r\n          <el-collapse>\r\n            <!-- 窗口设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-menu\"></i> 窗口设置\r\n                  </div>\r\n                  <span>{{ windowSetForm.count + '个窗口 / 超时等待' + windowSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  窗口数量(个)\r\n                  <el-tooltip v-if=\"!isLogin\" class=\"item\" effect=\"dark\" content=\"登录后解锁无限弹窗~!\" placement=\"top\">\r\n                    <i style=\"cursor: pointer; color: #ec681c; font-size: 15px; font-weight: bold;\" class=\"el-icon-lock\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"windowSetForm.count\" :min=\"1\" :max=\"isLogin ? 99 : 4\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  加载等待(秒)\r\n                  <el-tooltip effect=\"dark\" content=\"弹出的窗口，超过加载等待时间还未加载出来的话，就切换下一个课时了~!\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number size=\"mini\" v-model=\"windowSetForm.waitTime\" :min=\"10\" :max=\"120\"></el-input-number>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 视频设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'video'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-operation\"></i> 视频设置\r\n                  </div>\r\n                  <span>{{ 'x' + videoSetForm.ratio + (videoSetForm.mute ? ' / 静音' : '') }}</span>\r\n                  <!--  + (videoSetForm.autoStart ? ' / 自动播放' : '') + (videoSetForm.autoNext && pageType === 10 ? ' / 自动下一个' : '') -->\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  播放速率\r\n                  <el-tooltip effect=\"dark\" content=\"每个学校限制不一样，如果出现视频抽搐、卡顿，则说明被限速了，请降低速度，刷新浏览器再试~! \" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"videoSetForm.ratio\" :precision=\"1\" :step=\"0.5\" :min=\"0.5\" :max=\"2\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>是否静音</span>\r\n                <el-switch v-model=\"videoSetForm.mute\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"videoSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <!-- <div class=\"form-cell-item\" v-if=\"pageLevel === 3\">\r\n              <span>\r\n                自动下一个\r\n                <el-tooltip effect=\"dark\" content=\"V2版本的雨课堂，请到课时列表运行脚本体验~!\" placement=\"top-start\">\r\n                  <i class=\"el-icon-warning-outline\"></i>\r\n                </el-tooltip>\r\n              </span>\r\n              <el-switch :disabled=\"pageType !== 10\" v-model=\"videoSetForm.autoNext\" active-color=\"#f56b1a\"></el-switch>\r\n            </div> -->\r\n            </el-collapse-item>\r\n            <!-- PPT设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'ppt'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-picture\"></i> PPT设置\r\n                  </div>\r\n                  <span>{{ '每页停留' + pptSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>每页停留(秒)</span>\r\n                <el-input-number v-model=\"pptSetForm.waitTime\" :min=\"5\" :max=\"300\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"pptSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 讨论/答疑 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'taolun'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-opportunity\"></i> 讨论/答疑\r\n                  </div>\r\n                  <span>{{ isLogin ? '努力开发中...' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n              <div></div>\r\n            </el-collapse-item>\r\n            <!-- 作业/习题 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'zuoye'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 作业/习题\r\n                  </div>\r\n                  <span>{{ isLogin ? '前往习题页面，一键传题得积分' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n            </el-collapse-item>\r\n            <!-- 考试设置 -->\r\n            <el-collapse-item :disabled=\"!isLogin\" v-if=\"showType === 'all' || showType === 'kaoshi'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 考试设置\r\n                  </div>\r\n                  <el-button v-if=\"isLogin\" type=\"text\" :disabled=\"true\">请前往作业/习题详情页面体验</el-button>\r\n                  <span v-else>用户未登录</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  屏蔽防切屏\r\n                  <el-tooltip effect=\"dark\" content=\"请前往考试页面，根据步骤手动操作~! (仅限谷歌内核的浏览器)\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-button type=\"text\" :disabled=\"true\">请前往考试页面体验</el-button>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 赞赏作者 -->\r\n            <el-collapse-item>\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-milk-tea\"></i> 赞赏作者\r\n                  </div>\r\n                  <span>请作者喝杯奶茶（づ￣3￣）づ╭<span style=\"color: #f95b5b;\">❤</span>～</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <el-image style=\"margin-right: 20px;\" :src=\"payImgList[0]\" :preview-src-list=\"payImgList\"></el-image>\r\n                <el-image :src=\"payImgList[1]\" :preview-src-list=\"payImgList\"></el-image>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n          <!-- 提示 -->\r\n          <div class=\"form-cell-item\" v-if=\"isLogin\" style=\"color: red; max-width: 350px; margin: 20px 0;\">\r\n            温馨提示，目前传题、放大镜搜题功能已屏蔽，如有需要，请下载历史版本2.5.5!\r\n          </div>\r\n          <div class=\"bottom-btn\">\r\n            <span v-if=\"iframePlayStatus === 0\" class=\"start-btn\" @click=\"startStudy\">(っ•̀ω•́)っ✎⁾⁾ 开始学习</span>\r\n            <span v-else class=\"start-btn\" @click=\"reStudy\">(っ•̀ω•́)っ✎⁾⁾ 继续学习</span>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n    <div class=\"function-btns\" v-if=\"pageLevel === 2 && iframePlayStatus !== 1\">\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"设置sessionId\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-s-tools\" @click=\"showSessionIdEdit\"></i>\r\n      </el-tooltip>\r\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"批量传题，得积分\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-upload2\" @click=\"showUploadPanel\"></i>\r\n      </el-tooltip> -->\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"使用积分自动答题\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-edit-outline\" @click=\"showAutoAnswerPanel\"></i>\r\n      </el-tooltip> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport topInfo from './components/topInfo.vue'\r\n\r\nexport default {\r\n  components: {\r\n    topInfo\r\n  },\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'isShowDrawer', 'windowSet', 'videoSet', 'pptSet', 'examSet', 'iframePlayStatus', 'pageType']),\r\n    // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT\r\n    // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n    showType() {\r\n      if (this.pageType < 0) return 'all'\r\n      if (this.pageType === 0 || this.pageType === 10) return 'video'\r\n      if (this.pageType === 9) return 'ppt'\r\n      if (this.pageType === 3 || this.pageType === 13) return 'tuwen'\r\n      if (this.pageType === 4 || this.pageType === 14) return 'taolun'\r\n      if (this.pageType === 5 || this.pageType === 15) return 'kaoshi'\r\n      if (this.pageType === 6 || this.pageType === 16) return 'zuoye'\r\n    }\r\n  },\r\n  watch: {\r\n    windowSet(val) {\r\n      this.windowSetForm = Object.assign({}, val)\r\n    },\r\n    videoSet(val) {\r\n      this.videoSetForm = Object.assign({}, val)\r\n    },\r\n    pptSet(val) {\r\n      this.pptSetForm = Object.assign({}, val)\r\n    },\r\n    examSet(val) {\r\n      this.examSetForm = Object.assign({}, val)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isShowSetting: false,\r\n      windowSetForm: {},\r\n      videoSetForm: {},\r\n      pptSetForm: {},\r\n      examSetForm: {},\r\n      payImgList: ['https://sources.kdjack.cn/pay_wx.png', 'https://sources.kdjack.cn/pay_zfb.png']\r\n    }\r\n  },\r\n  methods: {\r\n    drawerClose() {\r\n      this.$store.commit('closeSettingDrawer')\r\n    },\r\n    startStudy(_, isReStudy) {\r\n      // 设置加载类型为刷课\r\n      this.$store.commit('updateIframeType', 1)\r\n      // 先暂停全局窗口\r\n      if (isReStudy) this.$store.commit('changeIframePlayStatus', -1)\r\n      // 保存全局表单数据\r\n      this.$store.commit('changeDataAndToLocal', { windowSet: this.windowSetForm, videoSet: this.videoSetForm, pptSet: this.pptSetForm, examSet: this.examSetForm })\r\n      // 如果是首页\r\n      if (this.pageLevel === 1) {\r\n        this.$message.warning('请选择一个科目后，再开始学习~!')\r\n        return false\r\n      } else if (this.pageLevel === 3) {\r\n        this.$message.success('脚本运行中，到课程列表也面运行脚本可体验更多功能哟~!')\r\n        // 如果是详情页\r\n        // 关闭设置弹框\r\n        this.$store.commit('closeSettingDrawer')\r\n        // 累加一个标记\r\n        this.$store.commit('changeReloadSetFlug')\r\n        return false\r\n      }\r\n      // 清空本地课程列表\r\n      if (!isReStudy) this.$store.commit('clearnClassList')\r\n\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          if (isReStudy) {\r\n            // 通知全局-开始打开视频窗口\r\n            this.$store.commit('changeIframePlayStatus', 1)\r\n          } else {\r\n            // 打开数据加载弹框\r\n            this.$store.commit('showStepLoading')\r\n          }\r\n        }, 300)\r\n      })\r\n    },\r\n    reStudy() {\r\n      this.startStudy(null, true)\r\n    },\r\n    showSessionIdEdit() {\r\n      this.$store.commit('updateIsShowSession', true)\r\n    },\r\n    showUploadPanel() {\r\n      if (!localStorage.getItem('sessionid')) {\r\n        this.showSessionIdEdit()\r\n        return false\r\n      }\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为上传\r\n      this.$store.commit('updateIframeType', 2)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    },\r\n    showAutoAnswerPanel() {\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为答题\r\n      this.$store.commit('updateIframeType', 3)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // 初始化表单\r\n      this.windowSetForm = Object.assign({}, this.windowSet)\r\n      this.videoSetForm = Object.assign({}, this.videoSet)\r\n      this.pptSetForm = Object.assign({}, this.pptSet)\r\n      this.examSetForm = Object.assign({}, this.examSet)\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\r\n}\r\n.setting-deawer .el-collapse {\r\n  border: none;\r\n}\r\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\r\n}\r\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #dbdbdb;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\r\n}\r\n.el-collapse-item__header.is-active {\r\n  border: none !important;\r\n}\r\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\r\n}\r\n.form-cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\r\n}\r\n.form-cell-item > span {\r\n  min-width: 120px;\r\n}\r\n.form-cell-item > .el-input-number {\r\n  width: 180px;\r\n}\r\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\r\n}\r\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\r\n}\r\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n<style scoped>\r\n.setting-deawer {\r\n  pointer-events: auto;\r\n}\r\n.info-form {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #31364d;\r\n}\r\n.bottom-btn {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.start-btn {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n}\r\n.start-btn:hover {\r\n  background: #282f4b;\r\n}\r\n.form-cell-item .el-image {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\r\n}\r\n.function-btns {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 6999;\r\n}\r\n.btn-item {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n}\r\n.btn-item:hover {\r\n  background: #5a5f7a;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.setting-deawer[data-v-2b2af070] {\r\n  pointer-events: auto;\n}\n.info-form[data-v-2b2af070] {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  background: #31364d;\n}\n.bottom-btn[data-v-2b2af070] {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\n}\n.start-btn[data-v-2b2af070] {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\n}\n.start-btn[data-v-2b2af070]:hover {\r\n  background: #282f4b;\n}\n.form-cell-item .el-image[data-v-2b2af070] {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\n}\n.function-btns[data-v-2b2af070] {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  z-index: 6999;\n}\n.btn-item[data-v-2b2af070] {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\n}\n.btn-item[data-v-2b2af070]:hover {\r\n  background: #5a5f7a;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/setting.vue"],"names":[],"mappings":";AAgaA;EACA,qBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,oBAAA;CACA;AACA;EACA,mBAAA;EACA,YAAA;EACA,eAAA;EACA,UAAA;EACA,qBAAA;EACA,kBAAA;EACA,oBAAA;EACA,qBAAA;EAAA,cAAA;EACA,sBAAA;MAAA,wBAAA;CACA;AACA;EACA,mBAAA;EACA,gBAAA;EACA,oBAAA;EACA,WAAA;EACA,kBAAA;EACA,mBAAA;EACA,gBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,aAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,YAAA;EACA,WAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,cAAA;CACA;AACA;EACA,qBAAA;EACA,cAAA;EACA,gBAAA;EACA,oBAAA;EACA,mBAAA;EACA,eAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,oBAAA;CACA","file":"setting.vue","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 弹框抽屉 -->\r\n    <el-drawer class=\"setting-deawer\" direction=\"ltr\" :size=\"400\" :withHeader=\"false\" :visible.sync=\"isShowDrawer\" @close=\"drawerClose\">\r\n      <el-scrollbar style=\"height:100%\">\r\n        <div class=\"info-form\">\r\n          <!-- 顶部用户信息 -->\r\n          <topInfo></topInfo>\r\n          <!-- 功能列表 -->\r\n          <el-collapse>\r\n            <!-- 窗口设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-menu\"></i> 窗口设置\r\n                  </div>\r\n                  <span>{{ windowSetForm.count + '个窗口 / 超时等待' + windowSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  窗口数量(个)\r\n                  <el-tooltip v-if=\"!isLogin\" class=\"item\" effect=\"dark\" content=\"登录后解锁无限弹窗~!\" placement=\"top\">\r\n                    <i style=\"cursor: pointer; color: #ec681c; font-size: 15px; font-weight: bold;\" class=\"el-icon-lock\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"windowSetForm.count\" :min=\"1\" :max=\"isLogin ? 99 : 4\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  加载等待(秒)\r\n                  <el-tooltip effect=\"dark\" content=\"弹出的窗口，超过加载等待时间还未加载出来的话，就切换下一个课时了~!\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number size=\"mini\" v-model=\"windowSetForm.waitTime\" :min=\"10\" :max=\"120\"></el-input-number>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 视频设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'video'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-operation\"></i> 视频设置\r\n                  </div>\r\n                  <span>{{ 'x' + videoSetForm.ratio + (videoSetForm.mute ? ' / 静音' : '') }}</span>\r\n                  <!--  + (videoSetForm.autoStart ? ' / 自动播放' : '') + (videoSetForm.autoNext && pageType === 10 ? ' / 自动下一个' : '') -->\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  播放速率\r\n                  <el-tooltip effect=\"dark\" content=\"每个学校限制不一样，如果出现视频抽搐、卡顿，则说明被限速了，请降低速度，刷新浏览器再试~! \" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-input-number v-model=\"videoSetForm.ratio\" :precision=\"1\" :step=\"0.5\" :min=\"0.5\" :max=\"2\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>是否静音</span>\r\n                <el-switch v-model=\"videoSetForm.mute\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"videoSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n              <!-- <div class=\"form-cell-item\" v-if=\"pageLevel === 3\">\r\n              <span>\r\n                自动下一个\r\n                <el-tooltip effect=\"dark\" content=\"V2版本的雨课堂，请到课时列表运行脚本体验~!\" placement=\"top-start\">\r\n                  <i class=\"el-icon-warning-outline\"></i>\r\n                </el-tooltip>\r\n              </span>\r\n              <el-switch :disabled=\"pageType !== 10\" v-model=\"videoSetForm.autoNext\" active-color=\"#f56b1a\"></el-switch>\r\n            </div> -->\r\n            </el-collapse-item>\r\n            <!-- PPT设置 -->\r\n            <el-collapse-item v-if=\"showType === 'all' || showType === 'ppt'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-picture\"></i> PPT设置\r\n                  </div>\r\n                  <span>{{ '每页停留' + pptSetForm.waitTime + '秒' }}</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>每页停留(秒)</span>\r\n                <el-input-number v-model=\"pptSetForm.waitTime\" :min=\"5\" :max=\"300\"></el-input-number>\r\n              </div>\r\n              <div class=\"form-cell-item\">\r\n                <span>自动播放</span>\r\n                <el-switch v-model=\"pptSetForm.autoStart\" active-color=\"#f56b1a\"></el-switch>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 讨论/答疑 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'taolun'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-opportunity\"></i> 讨论/答疑\r\n                  </div>\r\n                  <span>{{ isLogin ? '努力开发中...' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n              <div></div>\r\n            </el-collapse-item>\r\n            <!-- 作业/习题 -->\r\n            <el-collapse-item disabled v-if=\"showType === 'all' || showType === 'zuoye'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 作业/习题\r\n                  </div>\r\n                  <span>{{ isLogin ? '前往习题页面，一键传题得积分' : '用户未登录' }}</span>\r\n                </div>\r\n              </template>\r\n            </el-collapse-item>\r\n            <!-- 考试设置 -->\r\n            <el-collapse-item :disabled=\"!isLogin\" v-if=\"showType === 'all' || showType === 'kaoshi'\">\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-s-order\"></i> 考试设置\r\n                  </div>\r\n                  <el-button v-if=\"isLogin\" type=\"text\" :disabled=\"true\">请前往作业/习题详情页面体验</el-button>\r\n                  <span v-else>用户未登录</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <span>\r\n                  屏蔽防切屏\r\n                  <el-tooltip effect=\"dark\" content=\"请前往考试页面，根据步骤手动操作~! (仅限谷歌内核的浏览器)\" placement=\"top-start\">\r\n                    <i class=\"el-icon-warning-outline\"></i>\r\n                  </el-tooltip>\r\n                </span>\r\n                <el-button type=\"text\" :disabled=\"true\">请前往考试页面体验</el-button>\r\n              </div>\r\n            </el-collapse-item>\r\n            <!-- 赞赏作者 -->\r\n            <el-collapse-item>\r\n              <template slot=\"title\">\r\n                <div class=\"title-panel\">\r\n                  <div>\r\n                    <i class=\"el-icon-milk-tea\"></i> 赞赏作者\r\n                  </div>\r\n                  <span>请作者喝杯奶茶（づ￣3￣）づ╭<span style=\"color: #f95b5b;\">❤</span>～</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"form-cell-item\">\r\n                <el-image style=\"margin-right: 20px;\" :src=\"payImgList[0]\" :preview-src-list=\"payImgList\"></el-image>\r\n                <el-image :src=\"payImgList[1]\" :preview-src-list=\"payImgList\"></el-image>\r\n              </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n          <!-- 提示 -->\r\n          <div class=\"form-cell-item\" v-if=\"isLogin\" style=\"color: red; max-width: 350px; margin: 20px 0;\">\r\n            温馨提示，目前传题、放大镜搜题功能已屏蔽，如有需要，请下载历史版本2.5.5!\r\n          </div>\r\n          <div class=\"bottom-btn\">\r\n            <span v-if=\"iframePlayStatus === 0\" class=\"start-btn\" @click=\"startStudy\">(っ•̀ω•́)っ✎⁾⁾ 开始学习</span>\r\n            <span v-else class=\"start-btn\" @click=\"reStudy\">(っ•̀ω•́)っ✎⁾⁾ 继续学习</span>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n    <div class=\"function-btns\" v-if=\"pageLevel === 2 && iframePlayStatus !== 1\">\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"设置sessionId\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-s-tools\" @click=\"showSessionIdEdit\"></i>\r\n      </el-tooltip>\r\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"批量传题，得积分\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-upload2\" @click=\"showUploadPanel\"></i>\r\n      </el-tooltip> -->\r\n      <!-- <el-tooltip class=\"item\" effect=\"dark\" content=\"使用积分自动答题\" placement=\"left\">\r\n        <i class=\"btn-item el-icon-edit-outline\" @click=\"showAutoAnswerPanel\"></i>\r\n      </el-tooltip> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport topInfo from './components/topInfo.vue'\r\n\r\nexport default {\r\n  components: {\r\n    topInfo\r\n  },\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'isShowDrawer', 'windowSet', 'videoSet', 'pptSet', 'examSet', 'iframePlayStatus', 'pageType']),\r\n    // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT\r\n    // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n    showType() {\r\n      if (this.pageType < 0) return 'all'\r\n      if (this.pageType === 0 || this.pageType === 10) return 'video'\r\n      if (this.pageType === 9) return 'ppt'\r\n      if (this.pageType === 3 || this.pageType === 13) return 'tuwen'\r\n      if (this.pageType === 4 || this.pageType === 14) return 'taolun'\r\n      if (this.pageType === 5 || this.pageType === 15) return 'kaoshi'\r\n      if (this.pageType === 6 || this.pageType === 16) return 'zuoye'\r\n    }\r\n  },\r\n  watch: {\r\n    windowSet(val) {\r\n      this.windowSetForm = Object.assign({}, val)\r\n    },\r\n    videoSet(val) {\r\n      this.videoSetForm = Object.assign({}, val)\r\n    },\r\n    pptSet(val) {\r\n      this.pptSetForm = Object.assign({}, val)\r\n    },\r\n    examSet(val) {\r\n      this.examSetForm = Object.assign({}, val)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isShowSetting: false,\r\n      windowSetForm: {},\r\n      videoSetForm: {},\r\n      pptSetForm: {},\r\n      examSetForm: {},\r\n      payImgList: ['https://sources.sunsets-deprecated-domain-attention.top/pay_wx.png', 'https://sources.sunsets-deprecated-domain-attention.top/pay_zfb.png']\r\n    }\r\n  },\r\n  methods: {\r\n    drawerClose() {\r\n      this.$store.commit('closeSettingDrawer')\r\n    },\r\n    startStudy(_, isReStudy) {\r\n      // 设置加载类型为刷课\r\n      this.$store.commit('updateIframeType', 1)\r\n      // 先暂停全局窗口\r\n      if (isReStudy) this.$store.commit('changeIframePlayStatus', -1)\r\n      // 保存全局表单数据\r\n      this.$store.commit('changeDataAndToLocal', { windowSet: this.windowSetForm, videoSet: this.videoSetForm, pptSet: this.pptSetForm, examSet: this.examSetForm })\r\n      // 如果是首页\r\n      if (this.pageLevel === 1) {\r\n        this.$message.warning('请选择一个科目后，再开始学习~!')\r\n        return false\r\n      } else if (this.pageLevel === 3) {\r\n        this.$message.success('脚本运行中，到课程列表也面运行脚本可体验更多功能哟~!')\r\n        // 如果是详情页\r\n        // 关闭设置弹框\r\n        this.$store.commit('closeSettingDrawer')\r\n        // 累加一个标记\r\n        this.$store.commit('changeReloadSetFlug')\r\n        return false\r\n      }\r\n      // 清空本地课程列表\r\n      if (!isReStudy) this.$store.commit('clearnClassList')\r\n\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          if (isReStudy) {\r\n            // 通知全局-开始打开视频窗口\r\n            this.$store.commit('changeIframePlayStatus', 1)\r\n          } else {\r\n            // 打开数据加载弹框\r\n            this.$store.commit('showStepLoading')\r\n          }\r\n        }, 300)\r\n      })\r\n    },\r\n    reStudy() {\r\n      this.startStudy(null, true)\r\n    },\r\n    showSessionIdEdit() {\r\n      this.$store.commit('updateIsShowSession', true)\r\n    },\r\n    showUploadPanel() {\r\n      if (!localStorage.getItem('sessionid')) {\r\n        this.showSessionIdEdit()\r\n        return false\r\n      }\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为上传\r\n      this.$store.commit('updateIframeType', 2)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    },\r\n    showAutoAnswerPanel() {\r\n      // 先暂停全局窗口\r\n      this.$store.commit('changeIframePlayStatus', -1)\r\n      // 设置加载类型为答题\r\n      this.$store.commit('updateIframeType', 3)\r\n      // 关闭设置弹框\r\n      this.$store.commit('closeSettingDrawer')\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          // 打开数据加载弹框\r\n          this.$store.commit('showStepLoading')\r\n        }, 300)\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      // 初始化表单\r\n      this.windowSetForm = Object.assign({}, this.windowSet)\r\n      this.videoSetForm = Object.assign({}, this.videoSet)\r\n      this.pptSetForm = Object.assign({}, this.pptSet)\r\n      this.examSetForm = Object.assign({}, this.examSet)\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.setting-deawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.setting-deawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.setting-deawer .el-scrollbar__view {\r\n  padding-bottom: 80px;\r\n}\r\n.setting-deawer .el-collapse {\r\n  border: none;\r\n}\r\n.setting-deawer .el-collapse-item__wrap,\r\n.setting-deawer .el-collapse-item__header {\r\n  background-color: transparent;\r\n}\r\n.setting-deawer .el-collapse-item__header {\r\n  color: #dfdfdf;\r\n  padding: 0 10px 0 20px;\r\n  height: 55px;\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div {\r\n  min-width: 120px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: #dbdbdb;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > div > i {\r\n  font-size: 20px;\r\n  margin-right: 10px;\r\n}\r\n.setting-deawer .el-collapse-item__header .title-panel > span {\r\n  color: #8f8f8f;\r\n  width: 100%;\r\n  font-size: 12px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n.setting-deawer .el-collapse-item__header:hover {\r\n  background: #4f556e;\r\n}\r\n.el-collapse-item__header.is-active {\r\n  border: none !important;\r\n}\r\n.setting-deawer .el-collapse-item__wrap {\r\n  border-bottom: 1px solid #4e5470;\r\n}\r\n.setting-deawer .el-collapse-item__content {\r\n  color: #ffffff;\r\n  padding: 10px 30px;\r\n}\r\n.form-cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  pointer-events: auto;\r\n  margin-bottom: 5px;\r\n}\r\n.form-cell-item > span {\r\n  min-width: 120px;\r\n}\r\n.form-cell-item > .el-input-number {\r\n  width: 180px;\r\n}\r\n.form-cell-item .el-input__inner {\r\n  border: none;\r\n  background: transparent;\r\n  color: #ffffff;\r\n  font-weight: bold;\r\n}\r\n.form-cell-item .el-input-number__decrease,\r\n.form-cell-item .el-input-number__increase {\r\n  background: #1e2234;\r\n  color: #ffffff;\r\n  border: none;\r\n}\r\n.form-cell-item .el-switch__core {\r\n  width: 180px !important;\r\n  background: transparent;\r\n  border: 1px solid #4e5470;\r\n}\r\n.form-cell-item .el-icon-warning-outline {\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n<style scoped>\r\n.setting-deawer {\r\n  pointer-events: auto;\r\n}\r\n.info-form {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #31364d;\r\n}\r\n.bottom-btn {\r\n  position: absolute;\r\n  width: 100%;\r\n  color: #ffffff;\r\n  bottom: 0;\r\n  padding-bottom: 20px;\r\n  padding-top: 10px;\r\n  background: #31364d;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.start-btn {\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  background: #1d223c;\r\n  width: 70%;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n}\r\n.start-btn:hover {\r\n  background: #282f4b;\r\n}\r\n.form-cell-item .el-image {\r\n  width: 140px;\r\n  height: 140px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  display: inline-block;\r\n}\r\n.function-btns {\r\n  position: fixed;\r\n  right: 30px;\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  z-index: 6999;\r\n}\r\n.btn-item {\r\n  pointer-events: auto;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  background: #31364d;\r\n  border-radius: 50%;\r\n  color: #ffffff;\r\n  margin-bottom: 20px;\r\n  cursor: pointer;\r\n}\r\n.btn-item:hover {\r\n  background: #5a5f7a;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13264,7 +13298,7 @@


 // module
-exports.push([module.i, "\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\n}\n.second-drawer {\r\n  pointer-events: auto;\n}\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\n}\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\n}\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\n}\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\n}\n.second-drawer-panel {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  -ms-flex-align: center;\r\n      align-items: center;\n}\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\n}\n.second-drawer-panel .point-calc {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\n}\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\n}\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\n}\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\n}\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\n}\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\n}\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\n}\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\n}\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\n}\n.second-drawer-panel .point-calc > span {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #cdcdcd;\n}\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\n}\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\n}\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/components/src\\components\\components/topInfo.vue"],"names":[],"mappings":";AAsaA;;;EAGA,eAAA;EACA,sBAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;CACA;AACA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,eAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,uBAAA;MAAA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,kBAAA;EACA,YAAA;EACA,oBAAA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,YAAA;EACA,oBAAA;CACA;AACA;EACA,YAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,kBAAA;EACA,gBAAA;EACA,iCAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,oBAAA;EACA,mBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,gBAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;CACA;AAEA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,gBAAA;EACA,kBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,WAAA;EACA,mBAAA;EACA,sBAAA;MAAA,wBAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;CACA;AACA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,kBAAA;CACA;AACA;EACA,YAAA;EACA,mBAAA;EACA,cAAA;EACA,gBAAA;CACA;AACA;EACA,YAAA;CACA","file":"topInfo.vue","sourcesContent":["<template>\r\n  <div class=\"top-info\">\r\n    <div class=\"user-photo\">\r\n      <div class=\"top-breadcrumb\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item><span @click=\"gouHome\">首页</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 1\"><span @click=\"goList\">课时列表</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 2\">课时详情</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSponsor\" class=\"user-photo-bg\"></div>\r\n        <img :src=\"userInfo.avatar\" :class=\"{'is-sponsor': userInfo.isSponsor}\" @click=\"getUvId\" />\r\n      </template>\r\n      <i v-else @click=\"openLogin\" class=\"el-icon-s-custom\"></i>\r\n      <span class=\"tg-code\" @click=\"foo\">当前版本:<span>{{ version }}</span></span>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSign === 1\" class=\"qiandao\">已签到</div>\r\n        <el-button v-else @click=\"submitSign\" class=\"qiandao-btn\" :icon=\"[signStatus === 1 ? 'el-icon-loading' : '']\" type=\"warning\" plain>签到</el-button>\r\n      </template>\r\n    </div>\r\n    <template v-if=\"isLogin\">\r\n      <div class=\"user-name\">{{ getTimeText }}， {{ hideChart(userInfo.userName) }}<span class=\"logout-btn\" @click=\"logout\">[退出]</span></div>\r\n      <div class=\"top-tip\">\r\n        Token:\r\n        <el-button type=\"text\" @click=\"copyToken\"><i class=\"el-icon-connection\"></i>**********</el-button>\r\n        <el-popover placement=\"top\" width=\"300\" trigger=\"click\">\r\n          <el-form ref=\"refreshTokenFormRef\" :model=\"refreshTokenForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"输入密码\">\r\n              <el-input v-model=\"refreshTokenForm.password\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              刷新Token需要输入密码\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitRefresh\">刷新Token</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n          <i slot=\"reference\" style=\"cursor: pointer;\" class=\"el-icon-refresh\"></i>\r\n        </el-popover>\r\n      </div>\r\n      <!-- emailIsCheck -->\r\n      <div class=\"top-tip\">\r\n        推荐码:\r\n        <span>{{ userInfo.extensionCode || '******' }}</span>\r\n\r\n        <el-popover placement=\"top-start\" width=\"200\" trigger=\"hover\">\r\n          <span>邮箱未激活的用户，不影响功能的使用，但不能享受推荐得积分哟~!</span>\r\n          <br />\r\n          未收到邮件? <el-button type=\"text\" :disabled=\"sendStatus\" @click=\"sendEmail\">点我再次发送</el-button>\r\n          <p v-if=\"userInfo.emailIsCheck !== 1\" slot=\"reference\" style=\"cursor: pointer;\">未激活<i class=\"el-icon-warning-outline\"></i></p>\r\n        </el-popover>\r\n\r\n        <el-button v-if=\"userInfo.qqIsBinding\" type=\"text\">已绑Q: {{ hideChart(userInfo.qqNumber) }}</el-button>\r\n        <el-popover v-else placement=\"right\" width=\"400\" trigger=\"click\">\r\n          <el-form ref=\"bindingQQFormRef\" :model=\"bindingQQForm\" :rules=\"rules\" label-width=\"5px\">\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #349d09;\">成功绑定QQ后，可在Q群中进行签到等操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #f34545;\">为防止恶意绑定QQ，这里需要做2步操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              第一步: 填写QQ号(请注意: 绑定成功后不可修改):\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"bindingQQForm.qqNumber\" maxlength=\"15\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitQQ\">第一步: 保存QQ并获取Code</el-button>\r\n            </el-form-item>\r\n            <template v-if=\"qqCode || userInfo.qqCode\">\r\n              <el-form-item>\r\n                QQ绑定码为：{{ qqCode || userInfo.qqCode }}\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                第二步：使用QQ- {{ userInfo.qqNumber }} 在Q群中发送如下信息:\r\n                <br />\r\n                <el-tag style=\"cursor: pointer;\" @click=\"copyQQCode\">QQ绑定{{ qqCode || userInfo.qqCode }}(点击复制)</el-tag>\r\n              </el-form-item>\r\n            </template>\r\n          </el-form>\r\n          <el-button slot=\"reference\" type=\"text\">绑定QQ号</el-button>\r\n        </el-popover>\r\n      </div>\r\n      <div class=\"show-item point-item\" @click=\"openListPanel(1)\">\r\n        <span>{{ userInfo.integral || 0 }}</span>\r\n        <p>积分 <i :class=\"[refreshStatus === 1 ? 'el-icon-loading' : 'el-icon-refresh']\" @click.stop=\"refreshUserInfo\"></i></p>\r\n      </div>\r\n      <div class=\"show-item tuiguang-item\" @click=\"openListPanel(2)\">\r\n        <span>{{ userInfo.recommendUserCount || 0 }}</span>\r\n        <p>推广</p>\r\n      </div>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"user-name\" style=\"cursor: pointer;\" @click=\"openLogin\">立即登录</div>\r\n      <div class=\"top-tip\">未登录用户无法使用作业、习题、考试等功能</div>\r\n    </template>\r\n\r\n    <!-- 二级积分-推广弹框 -->\r\n    <el-drawer class=\"second-drawer\" :visible.sync=\"isShowdrawer\" :withHeader=\"false\" size=\"350px\" direction=\"ltr\" :append-to-body=\"true\">\r\n      <el-scrollbar style=\"height: 100%;\">\r\n        <div class=\"second-drawer-panel\" style=\"overflow:auto\">\r\n          <div class=\"top-title\">{{ dataType === 1 ? '积分明细' : '推广列表' }}</div>\r\n          <div class=\"cell-item\" v-for=\"(item, i) in dataList\" :key=\"i\">\r\n            <i v-if=\"dataType === 1\" :class=\"getItemIcon(item)\"></i>\r\n            <img v-else :src=\"item.avatar\" />\r\n            <div class=\"main\">\r\n              <span>{{ item.memo || item.school }}<span v-if=\"item.userName\"> - {{ item.userName }}</span></span>\r\n              <p>{{ formatTime(item.createTime) }}</p>\r\n            </div>\r\n            <span v-if=\"dataType === 1\">{{ item.type === 1 ? ' + ' : ' - ' }} {{ item.money }}</span>\r\n          </div>\r\n          <div class=\"load-more\" @click=\"loadDataList\">\r\n            <span v-if=\"loadState === 0\">加载更多</span>\r\n            <span v-else-if=\"loadState === 1\">\r\n              <i class=\"el-icon-loading\"></i>加载中\r\n            </span>\r\n            <span v-else style=\"color: #6f7695;\">没有更多了</span>\r\n          </div>\r\n          <el-backtop target=\".second-drawer .el-scrollbar__wrap\"></el-backtop>\r\n        </div>\r\n\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getExcToken } from '@/api/index'\r\nimport { queryUserIntegral, queryUserRecommend, userSign, refreshToken, sendActivateEmail, saveQQNumber } from '@/api/question'\r\nimport { version, storageTokenlKey } from '@/config'\r\nimport { hideChart, formatTime, md5Pwd } from '@/utils'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'platformType', 'universityId', 'courseSign', 'classroomId', 'userInfo']),\r\n    getTimeText() {\r\n      const hours = new Date().getHours()\r\n      if (hours > 5 && hours <= 10) {\r\n        return '早上好'\r\n      } else if (hours > 10 && hours <= 15) {\r\n        return '中午好'\r\n      } else if (hours > 15 && hours <= 19) {\r\n        return '下午好'\r\n      } else {\r\n        return '晚上好'\r\n      }\r\n    },\r\n    tokenBlank() {\r\n      return new Array(this.userInfo.token.length).fill('*').join('')\r\n    }\r\n  },\r\n  watch: {\r\n    async isShowdrawer(val) {\r\n      // 窗口关闭，重置查询条件\r\n      if (!val) {\r\n        this.dataList = []\r\n        this.currentPage = 1\r\n        this.loadState = 0\r\n        // this.totalPage = 1\r\n      } else {\r\n        await this.loadDataList()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      version,\r\n      hideChart,\r\n      isShowdrawer: false,\r\n      dataList: [],\r\n      pageSize: 20,\r\n      currentPage: 1,\r\n      totalPage: 1,\r\n      // 0：等待加载；1：加载中；-1：没有更多\r\n      loadState: 0,\r\n      // 1: 积分;2: 推广\r\n      dataType: 1,\r\n      qqCode: '',\r\n      isShowToken: false,\r\n      refreshTokenForm: {\r\n        password: ''\r\n      },\r\n      bindingQQForm: {\r\n        qqNumber: ''\r\n      },\r\n      rules: {\r\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n        qqNumber: [{ required: true, message: '请输入QQ号', trigger: 'blur' }]\r\n      },\r\n      // 刷新状态\r\n      refreshStatus: 0,\r\n      // 签到状态\r\n      signStatus: 0,\r\n      // 发送邮件\r\n      sendStatus: 0,\r\n      clickCount: 0\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime,\r\n    copyToken() {\r\n      GM_setClipboard(this.userInfo.token)\r\n      this.$message.success('Token已拷贝至剪切板~!')\r\n    },\r\n    copyQQCode() {\r\n      GM_setClipboard('QQ绑定' + (this.qqCode || this.userInfo.qqCode))\r\n      this.$message.success('已拷贝至剪切板~!')\r\n    },\r\n    async getUvId() {\r\n      if (this.clickCount < 4) {\r\n        this.clickCount++\r\n        return false\r\n      }\r\n      GM_setClipboard(this.universityId)\r\n      this.$message.success('uv_id已拷贝至剪切板~!')\r\n      this.clickCount = 0\r\n    },\r\n    // 退出\r\n    logout() {\r\n      this.$confirm('确定要退出吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 移除自动登录token\r\n        localStorage.removeItem(storageTokenlKey + 'auto_')\r\n        // 退出\r\n        this.$store.commit('updateIsLogin', false)\r\n      })\r\n    },\r\n    openLogin() {\r\n      this.$store.commit('updateIsShowLogin', true)\r\n    },\r\n    openListPanel(type) {\r\n      this.dataType = type\r\n      this.isShowdrawer = true\r\n    },\r\n    gouHome() {\r\n      if (this.pageLevel < 2) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/courselist'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/index'\r\n      }\r\n      location.href = url\r\n    },\r\n    goList() {\r\n      if (this.pageLevel < 3) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/lms/' + this.courseSign + '/' + this.classroomId + '/studycontent'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/studentLog/' + this.classroomId\r\n      }\r\n      location.href = url\r\n    },\r\n    async loadDataList() {\r\n      if (this.loadState === 0) {\r\n        this.loadState = 1\r\n        let data = []\r\n        if (this.dataType === 1) {\r\n          data = await queryUserIntegral({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        } else {\r\n          data = await queryUserRecommend({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        }\r\n        this.totalPage = data.data.totalPage\r\n        data.data.list.map((item) => this.dataList.push(item))\r\n        this.loadState = this.currentPage < this.totalPage ? 0 : -1\r\n        this.currentPage++\r\n      }\r\n    },\r\n    async submitSign() {\r\n      if (this.signStatus !== 0) return false\r\n      this.signStatus = 1\r\n      await setTimeout(async () => {\r\n        let data = await userSign({ userId: this.userInfo.id })\r\n        if (data.status * 1 === 200) {\r\n          this.$message.success('签到成功~!')\r\n        } else {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        // 查询用户信息-登录\r\n        data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        this.signStatus = 0\r\n      }, 1000)\r\n    },\r\n    getItemIcon(item) {\r\n      if (item.type === 1) {\r\n        // 收入类型（1：上传题目；2：签到；3：推广；4：绑定邮箱）\r\n        switch (item.incomeType) {\r\n          case 1:\r\n            return 'el-icon-upload2'\r\n          case 2:\r\n            return 'el-icon-date'\r\n          case 3:\r\n            return 'el-icon-connection'\r\n          case 4:\r\n            return 'el-icon-postcard'\r\n        }\r\n      } else {\r\n        // 支出类型（1：查询问题）\r\n        switch (item.expendType) {\r\n          case 1:\r\n            return 'el-icon-search'\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    async submitRefresh() {\r\n      this.$refs.refreshTokenFormRef.validate(async (valid) => {\r\n        if (valid) {\r\n          const postData = {\r\n            id: this.userInfo.id,\r\n            email: this.userInfo.email,\r\n            token: this.userInfo.token,\r\n            password: md5Pwd(this.refreshTokenForm.password)\r\n          }\r\n          const loginData = await refreshToken(postData)\r\n          if (loginData.status * 1 === 200) {\r\n            // 保存用户信息\r\n            const userInfo = loginData.data\r\n            userInfo.lastQueryTime = new Date().getTime()\r\n            // 保存用户信息\r\n            this.$store.commit('updateUserInfo', userInfo)\r\n            this.$message.success('刷新令牌成功~!')\r\n          } else {\r\n            this.$message.error('密码输入有误~!')\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async submitQQ() {\r\n      if (this.bindingQQForm.qqNumber.length <= 0) {\r\n        this.$message.warning('请填写QQ号~!')\r\n        return false\r\n      }\r\n      const postData = {\r\n        userId: this.userInfo.id,\r\n        token: this.userInfo.token,\r\n        qqNumber: this.bindingQQForm.qqNumber\r\n      }\r\n      const resultData = await saveQQNumber(postData)\r\n      if (resultData.status * 1 === 200) {\r\n        // 保存用户信息\r\n        this.qqCode = resultData.data\r\n        const userInfo = JSON.parse(JSON.stringify(this.userInfo))\r\n        userInfo.qqNumber = this.bindingQQForm.qqNumber\r\n        userInfo.qqCode = this.qqCode\r\n        // 保存用户信息\r\n        this.$store.commit('updateUserInfo', userInfo)\r\n        this.$message.success('保存成功~!')\r\n      } else {\r\n        this.$message.error('保存失败~!')\r\n      }\r\n    },\r\n    async sendEmail() {\r\n      if (this.sendStatus !== 0) return false\r\n      this.sendStatus = 1\r\n      await setTimeout(async () => {\r\n        const data = await sendActivateEmail({ userId: this.userInfo.id })\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n          return false\r\n        }\r\n        this.$message.success('邮件已发送，请注意查收~!')\r\n        this.sendStatus = 0\r\n      }, 1000)\r\n    },\r\n    async refreshUserInfo() {\r\n      if (this.refreshStatus !== 0) return false\r\n      this.refreshStatus = 1\r\n      setTimeout(async () => {\r\n        const data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        } else {\r\n          this.$message.success('刷新成功~!')\r\n        }\r\n        this.refreshStatus = 0\r\n      }, 1000)\r\n    },\r\n    async foo() {\r\n      // 这里设置一下\r\n      let csrftoken = ''\r\n      const cookieList = document.cookie.split('; ')\r\n      for (let i = 0; i < cookieList.length; i++) {\r\n        if (cookieList[i].indexOf('csrftoken=') >= 0) {\r\n          csrftoken = cookieList[i].replace('csrftoken=', '')\r\n          break\r\n        }\r\n      }\r\n      // 作业题页面\r\n      let data = await getExcToken({ exam_id: '159246', user_id: '37611722', classroom_id: this.classroomId, no_loading: true }, csrftoken, this.universityId)\r\n      console.log('data: ', data)\r\n      // crypt\r\n      data = data.data.data.crypt\r\n      let tempUrl = 'https://changjiang-exam.yuketang.cn/login?exam_id=159246&user_id=37611722&crypt=__crypt&next=https://changjiang-exam.yuketang.cn/result/159246?isFrom=1'\r\n      tempUrl = tempUrl.replace('__crypt', encodeURIComponent(data))\r\n      console.log('tempUrl: ', tempUrl)\r\n      debugger\r\n      window.location.href = tempUrl\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.userInfo) {\r\n      console.log('this.userInfo: ', this.userInfo)\r\n      this.qqCode = this.userInfo.qqCode || ''\r\n      if (this.userInfo.qqNumber) {\r\n        this.bindingQQForm.qqNumber = this.userInfo.qqNumber\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n.second-drawer {\r\n  pointer-events: auto;\r\n}\r\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\r\n}\r\n.second-drawer-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n.second-drawer-panel .point-calc {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\r\n}\r\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\r\n}\r\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n}\r\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\r\n}\r\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\r\n}\r\n\r\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\r\n}\r\n.second-drawer-panel .point-calc > span {\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n}\r\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n}\r\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n}\r\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\r\n}\r\n</style>\r\n<style scoped>\r\n.top-info {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\r\n}\r\n.user-photo {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.user-photo > .user-photo-bg {\r\n  background-image: url(https://sources.kdjack.cn/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\r\n}\r\n.user-photo > img,\r\n.user-photo > .el-icon-s-custom {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n.user-photo > .el-icon-s-custom {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\r\n}\r\n.user-photo > .tg-code {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\r\n}\r\n.top-breadcrumb {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\r\n}\r\n.user-photot > .qiandao {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\r\n}\r\n.tg-code > span {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\r\n}\r\n.user-name {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\r\n}\r\n.user-name span {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n.top-tip {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.top-tip > p {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n}\r\n.top-tip > span {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\r\n}\r\n.top-tip > i {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\r\n}\r\n.show-item {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n.show-item span {\r\n  font-size: 26px;\r\n  color: #f56b1a;\r\n}\r\n.point-item {\r\n  left: 15%;\r\n}\r\n.tuiguang-item {\r\n  right: 15%;\r\n}\r\n.qiandao {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\r\n}\r\n.qiandao-btn {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\n}\n.second-drawer {\r\n  pointer-events: auto;\n}\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\n}\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\n}\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\n}\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\n}\n.second-drawer-panel {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  -ms-flex-align: center;\r\n      align-items: center;\n}\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\n}\n.second-drawer-panel .point-calc {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\n}\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-pack: justify;\r\n      justify-content: space-between;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\n}\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\n}\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\n}\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\n}\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\n}\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\n}\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\n}\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\n}\n.second-drawer-panel .point-calc > span {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  color: #cdcdcd;\n}\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\n}\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\n}\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/components/src\\components\\components/topInfo.vue"],"names":[],"mappings":";AAsaA;;;EAGA,eAAA;EACA,sBAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;CACA;AACA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,eAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,uBAAA;MAAA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,kBAAA;EACA,YAAA;EACA,oBAAA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,YAAA;EACA,oBAAA;CACA;AACA;EACA,YAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,+BAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,kBAAA;EACA,gBAAA;EACA,iCAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,oBAAA;EACA,mBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,gBAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;CACA;AAEA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,gBAAA;EACA,kBAAA;CACA;AACA;EACA,qBAAA;EAAA,cAAA;EACA,WAAA;EACA,mBAAA;EACA,sBAAA;MAAA,wBAAA;EACA,uBAAA;MAAA,oBAAA;EACA,eAAA;CACA;AACA;EACA,eAAA;EACA,gBAAA;EACA,kBAAA;EACA,kBAAA;CACA;AACA;EACA,YAAA;EACA,mBAAA;EACA,cAAA;EACA,gBAAA;CACA;AACA;EACA,YAAA;CACA","file":"topInfo.vue","sourcesContent":["<template>\r\n  <div class=\"top-info\">\r\n    <div class=\"user-photo\">\r\n      <div class=\"top-breadcrumb\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item><span @click=\"gouHome\">首页</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 1\"><span @click=\"goList\">课时列表</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 2\">课时详情</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSponsor\" class=\"user-photo-bg\"></div>\r\n        <img :src=\"userInfo.avatar\" :class=\"{'is-sponsor': userInfo.isSponsor}\" @click=\"getUvId\" />\r\n      </template>\r\n      <i v-else @click=\"openLogin\" class=\"el-icon-s-custom\"></i>\r\n      <span class=\"tg-code\" @click=\"foo\">当前版本:<span>{{ version }}</span></span>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSign === 1\" class=\"qiandao\">已签到</div>\r\n        <el-button v-else @click=\"submitSign\" class=\"qiandao-btn\" :icon=\"[signStatus === 1 ? 'el-icon-loading' : '']\" type=\"warning\" plain>签到</el-button>\r\n      </template>\r\n    </div>\r\n    <template v-if=\"isLogin\">\r\n      <div class=\"user-name\">{{ getTimeText }}， {{ hideChart(userInfo.userName) }}<span class=\"logout-btn\" @click=\"logout\">[退出]</span></div>\r\n      <div class=\"top-tip\">\r\n        Token:\r\n        <el-button type=\"text\" @click=\"copyToken\"><i class=\"el-icon-connection\"></i>**********</el-button>\r\n        <el-popover placement=\"top\" width=\"300\" trigger=\"click\">\r\n          <el-form ref=\"refreshTokenFormRef\" :model=\"refreshTokenForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"输入密码\">\r\n              <el-input v-model=\"refreshTokenForm.password\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              刷新Token需要输入密码\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitRefresh\">刷新Token</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n          <i slot=\"reference\" style=\"cursor: pointer;\" class=\"el-icon-refresh\"></i>\r\n        </el-popover>\r\n      </div>\r\n      <!-- emailIsCheck -->\r\n      <div class=\"top-tip\">\r\n        推荐码:\r\n        <span>{{ userInfo.extensionCode || '******' }}</span>\r\n\r\n        <el-popover placement=\"top-start\" width=\"200\" trigger=\"hover\">\r\n          <span>邮箱未激活的用户，不影响功能的使用，但不能享受推荐得积分哟~!</span>\r\n          <br />\r\n          未收到邮件? <el-button type=\"text\" :disabled=\"sendStatus\" @click=\"sendEmail\">点我再次发送</el-button>\r\n          <p v-if=\"userInfo.emailIsCheck !== 1\" slot=\"reference\" style=\"cursor: pointer;\">未激活<i class=\"el-icon-warning-outline\"></i></p>\r\n        </el-popover>\r\n\r\n        <el-button v-if=\"userInfo.qqIsBinding\" type=\"text\">已绑Q: {{ hideChart(userInfo.qqNumber) }}</el-button>\r\n        <el-popover v-else placement=\"right\" width=\"400\" trigger=\"click\">\r\n          <el-form ref=\"bindingQQFormRef\" :model=\"bindingQQForm\" :rules=\"rules\" label-width=\"5px\">\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #349d09;\">成功绑定QQ后，可在Q群中进行签到等操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #f34545;\">为防止恶意绑定QQ，这里需要做2步操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              第一步: 填写QQ号(请注意: 绑定成功后不可修改):\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"bindingQQForm.qqNumber\" maxlength=\"15\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitQQ\">第一步: 保存QQ并获取Code</el-button>\r\n            </el-form-item>\r\n            <template v-if=\"qqCode || userInfo.qqCode\">\r\n              <el-form-item>\r\n                QQ绑定码为：{{ qqCode || userInfo.qqCode }}\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                第二步：使用QQ- {{ userInfo.qqNumber }} 在Q群中发送如下信息:\r\n                <br />\r\n                <el-tag style=\"cursor: pointer;\" @click=\"copyQQCode\">QQ绑定{{ qqCode || userInfo.qqCode }}(点击复制)</el-tag>\r\n              </el-form-item>\r\n            </template>\r\n          </el-form>\r\n          <el-button slot=\"reference\" type=\"text\">绑定QQ号</el-button>\r\n        </el-popover>\r\n      </div>\r\n      <div class=\"show-item point-item\" @click=\"openListPanel(1)\">\r\n        <span>{{ userInfo.integral || 0 }}</span>\r\n        <p>积分 <i :class=\"[refreshStatus === 1 ? 'el-icon-loading' : 'el-icon-refresh']\" @click.stop=\"refreshUserInfo\"></i></p>\r\n      </div>\r\n      <div class=\"show-item tuiguang-item\" @click=\"openListPanel(2)\">\r\n        <span>{{ userInfo.recommendUserCount || 0 }}</span>\r\n        <p>推广</p>\r\n      </div>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"user-name\" style=\"cursor: pointer;\" @click=\"openLogin\">立即登录</div>\r\n      <div class=\"top-tip\">未登录用户无法使用作业、习题、考试等功能</div>\r\n    </template>\r\n\r\n    <!-- 二级积分-推广弹框 -->\r\n    <el-drawer class=\"second-drawer\" :visible.sync=\"isShowdrawer\" :withHeader=\"false\" size=\"350px\" direction=\"ltr\" :append-to-body=\"true\">\r\n      <el-scrollbar style=\"height: 100%;\">\r\n        <div class=\"second-drawer-panel\" style=\"overflow:auto\">\r\n          <div class=\"top-title\">{{ dataType === 1 ? '积分明细' : '推广列表' }}</div>\r\n          <div class=\"cell-item\" v-for=\"(item, i) in dataList\" :key=\"i\">\r\n            <i v-if=\"dataType === 1\" :class=\"getItemIcon(item)\"></i>\r\n            <img v-else :src=\"item.avatar\" />\r\n            <div class=\"main\">\r\n              <span>{{ item.memo || item.school }}<span v-if=\"item.userName\"> - {{ item.userName }}</span></span>\r\n              <p>{{ formatTime(item.createTime) }}</p>\r\n            </div>\r\n            <span v-if=\"dataType === 1\">{{ item.type === 1 ? ' + ' : ' - ' }} {{ item.money }}</span>\r\n          </div>\r\n          <div class=\"load-more\" @click=\"loadDataList\">\r\n            <span v-if=\"loadState === 0\">加载更多</span>\r\n            <span v-else-if=\"loadState === 1\">\r\n              <i class=\"el-icon-loading\"></i>加载中\r\n            </span>\r\n            <span v-else style=\"color: #6f7695;\">没有更多了</span>\r\n          </div>\r\n          <el-backtop target=\".second-drawer .el-scrollbar__wrap\"></el-backtop>\r\n        </div>\r\n\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getExcToken } from '@/api/index'\r\nimport { queryUserIntegral, queryUserRecommend, userSign, refreshToken, sendActivateEmail, saveQQNumber } from '@/api/question'\r\nimport { version, storageTokenlKey } from '@/config'\r\nimport { hideChart, formatTime, md5Pwd } from '@/utils'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'platformType', 'universityId', 'courseSign', 'classroomId', 'userInfo']),\r\n    getTimeText() {\r\n      const hours = new Date().getHours()\r\n      if (hours > 5 && hours <= 10) {\r\n        return '早上好'\r\n      } else if (hours > 10 && hours <= 15) {\r\n        return '中午好'\r\n      } else if (hours > 15 && hours <= 19) {\r\n        return '下午好'\r\n      } else {\r\n        return '晚上好'\r\n      }\r\n    },\r\n    tokenBlank() {\r\n      return new Array(this.userInfo.token.length).fill('*').join('')\r\n    }\r\n  },\r\n  watch: {\r\n    async isShowdrawer(val) {\r\n      // 窗口关闭，重置查询条件\r\n      if (!val) {\r\n        this.dataList = []\r\n        this.currentPage = 1\r\n        this.loadState = 0\r\n        // this.totalPage = 1\r\n      } else {\r\n        await this.loadDataList()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      version,\r\n      hideChart,\r\n      isShowdrawer: false,\r\n      dataList: [],\r\n      pageSize: 20,\r\n      currentPage: 1,\r\n      totalPage: 1,\r\n      // 0：等待加载；1：加载中；-1：没有更多\r\n      loadState: 0,\r\n      // 1: 积分;2: 推广\r\n      dataType: 1,\r\n      qqCode: '',\r\n      isShowToken: false,\r\n      refreshTokenForm: {\r\n        password: ''\r\n      },\r\n      bindingQQForm: {\r\n        qqNumber: ''\r\n      },\r\n      rules: {\r\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n        qqNumber: [{ required: true, message: '请输入QQ号', trigger: 'blur' }]\r\n      },\r\n      // 刷新状态\r\n      refreshStatus: 0,\r\n      // 签到状态\r\n      signStatus: 0,\r\n      // 发送邮件\r\n      sendStatus: 0,\r\n      clickCount: 0\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime,\r\n    copyToken() {\r\n      GM_setClipboard(this.userInfo.token)\r\n      this.$message.success('Token已拷贝至剪切板~!')\r\n    },\r\n    copyQQCode() {\r\n      GM_setClipboard('QQ绑定' + (this.qqCode || this.userInfo.qqCode))\r\n      this.$message.success('已拷贝至剪切板~!')\r\n    },\r\n    async getUvId() {\r\n      if (this.clickCount < 4) {\r\n        this.clickCount++\r\n        return false\r\n      }\r\n      GM_setClipboard(this.universityId)\r\n      this.$message.success('uv_id已拷贝至剪切板~!')\r\n      this.clickCount = 0\r\n    },\r\n    // 退出\r\n    logout() {\r\n      this.$confirm('确定要退出吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 移除自动登录token\r\n        localStorage.removeItem(storageTokenlKey + 'auto_')\r\n        // 退出\r\n        this.$store.commit('updateIsLogin', false)\r\n      })\r\n    },\r\n    openLogin() {\r\n      this.$store.commit('updateIsShowLogin', true)\r\n    },\r\n    openListPanel(type) {\r\n      this.dataType = type\r\n      this.isShowdrawer = true\r\n    },\r\n    gouHome() {\r\n      if (this.pageLevel < 2) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/courselist'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/index'\r\n      }\r\n      location.href = url\r\n    },\r\n    goList() {\r\n      if (this.pageLevel < 3) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/lms/' + this.courseSign + '/' + this.classroomId + '/studycontent'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/studentLog/' + this.classroomId\r\n      }\r\n      location.href = url\r\n    },\r\n    async loadDataList() {\r\n      if (this.loadState === 0) {\r\n        this.loadState = 1\r\n        let data = []\r\n        if (this.dataType === 1) {\r\n          data = await queryUserIntegral({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        } else {\r\n          data = await queryUserRecommend({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        }\r\n        this.totalPage = data.data.totalPage\r\n        data.data.list.map((item) => this.dataList.push(item))\r\n        this.loadState = this.currentPage < this.totalPage ? 0 : -1\r\n        this.currentPage++\r\n      }\r\n    },\r\n    async submitSign() {\r\n      if (this.signStatus !== 0) return false\r\n      this.signStatus = 1\r\n      await setTimeout(async () => {\r\n        let data = await userSign({ userId: this.userInfo.id })\r\n        if (data.status * 1 === 200) {\r\n          this.$message.success('签到成功~!')\r\n        } else {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        // 查询用户信息-登录\r\n        data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        this.signStatus = 0\r\n      }, 1000)\r\n    },\r\n    getItemIcon(item) {\r\n      if (item.type === 1) {\r\n        // 收入类型（1：上传题目；2：签到；3：推广；4：绑定邮箱）\r\n        switch (item.incomeType) {\r\n          case 1:\r\n            return 'el-icon-upload2'\r\n          case 2:\r\n            return 'el-icon-date'\r\n          case 3:\r\n            return 'el-icon-connection'\r\n          case 4:\r\n            return 'el-icon-postcard'\r\n        }\r\n      } else {\r\n        // 支出类型（1：查询问题）\r\n        switch (item.expendType) {\r\n          case 1:\r\n            return 'el-icon-search'\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    async submitRefresh() {\r\n      this.$refs.refreshTokenFormRef.validate(async (valid) => {\r\n        if (valid) {\r\n          const postData = {\r\n            id: this.userInfo.id,\r\n            email: this.userInfo.email,\r\n            token: this.userInfo.token,\r\n            password: md5Pwd(this.refreshTokenForm.password)\r\n          }\r\n          const loginData = await refreshToken(postData)\r\n          if (loginData.status * 1 === 200) {\r\n            // 保存用户信息\r\n            const userInfo = loginData.data\r\n            userInfo.lastQueryTime = new Date().getTime()\r\n            // 保存用户信息\r\n            this.$store.commit('updateUserInfo', userInfo)\r\n            this.$message.success('刷新令牌成功~!')\r\n          } else {\r\n            this.$message.error('密码输入有误~!')\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async submitQQ() {\r\n      if (this.bindingQQForm.qqNumber.length <= 0) {\r\n        this.$message.warning('请填写QQ号~!')\r\n        return false\r\n      }\r\n      const postData = {\r\n        userId: this.userInfo.id,\r\n        token: this.userInfo.token,\r\n        qqNumber: this.bindingQQForm.qqNumber\r\n      }\r\n      const resultData = await saveQQNumber(postData)\r\n      if (resultData.status * 1 === 200) {\r\n        // 保存用户信息\r\n        this.qqCode = resultData.data\r\n        const userInfo = JSON.parse(JSON.stringify(this.userInfo))\r\n        userInfo.qqNumber = this.bindingQQForm.qqNumber\r\n        userInfo.qqCode = this.qqCode\r\n        // 保存用户信息\r\n        this.$store.commit('updateUserInfo', userInfo)\r\n        this.$message.success('保存成功~!')\r\n      } else {\r\n        this.$message.error('保存失败~!')\r\n      }\r\n    },\r\n    async sendEmail() {\r\n      if (this.sendStatus !== 0) return false\r\n      this.sendStatus = 1\r\n      await setTimeout(async () => {\r\n        const data = await sendActivateEmail({ userId: this.userInfo.id })\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n          return false\r\n        }\r\n        this.$message.success('邮件已发送，请注意查收~!')\r\n        this.sendStatus = 0\r\n      }, 1000)\r\n    },\r\n    async refreshUserInfo() {\r\n      if (this.refreshStatus !== 0) return false\r\n      this.refreshStatus = 1\r\n      setTimeout(async () => {\r\n        const data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        } else {\r\n          this.$message.success('刷新成功~!')\r\n        }\r\n        this.refreshStatus = 0\r\n      }, 1000)\r\n    },\r\n    async foo() {\r\n      // 这里设置一下\r\n      let csrftoken = ''\r\n      const cookieList = document.cookie.split('; ')\r\n      for (let i = 0; i < cookieList.length; i++) {\r\n        if (cookieList[i].indexOf('csrftoken=') >= 0) {\r\n          csrftoken = cookieList[i].replace('csrftoken=', '')\r\n          break\r\n        }\r\n      }\r\n      // 作业题页面\r\n      let data = await getExcToken({ exam_id: '159246', user_id: '37611722', classroom_id: this.classroomId, no_loading: true }, csrftoken, this.universityId)\r\n      console.log('data: ', data)\r\n      // crypt\r\n      data = data.data.data.crypt\r\n      let tempUrl = 'https://changjiang-exam.yuketang.cn/login?exam_id=159246&user_id=37611722&crypt=__crypt&next=https://changjiang-exam.yuketang.cn/result/159246?isFrom=1'\r\n      tempUrl = tempUrl.replace('__crypt', encodeURIComponent(data))\r\n      console.log('tempUrl: ', tempUrl)\r\n      debugger\r\n      window.location.href = tempUrl\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.userInfo) {\r\n      console.log('this.userInfo: ', this.userInfo)\r\n      this.qqCode = this.userInfo.qqCode || ''\r\n      if (this.userInfo.qqNumber) {\r\n        this.bindingQQForm.qqNumber = this.userInfo.qqNumber\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n.second-drawer {\r\n  pointer-events: auto;\r\n}\r\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\r\n}\r\n.second-drawer-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n.second-drawer-panel .point-calc {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\r\n}\r\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\r\n}\r\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n}\r\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\r\n}\r\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\r\n}\r\n\r\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\r\n}\r\n.second-drawer-panel .point-calc > span {\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n}\r\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n}\r\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n}\r\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\r\n}\r\n</style>\r\n<style scoped>\r\n.top-info {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\r\n}\r\n.user-photo {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.user-photo > .user-photo-bg {\r\n  background-image: url(https://sources.sunsets-deprecated-domain-attention.top/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\r\n}\r\n.user-photo > img,\r\n.user-photo > .el-icon-s-custom {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n.user-photo > .el-icon-s-custom {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\r\n}\r\n.user-photo > .tg-code {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\r\n}\r\n.top-breadcrumb {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\r\n}\r\n.user-photot > .qiandao {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\r\n}\r\n.tg-code > span {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\r\n}\r\n.user-name {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\r\n}\r\n.user-name span {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n.top-tip {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.top-tip > p {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n}\r\n.top-tip > span {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\r\n}\r\n.top-tip > i {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\r\n}\r\n.show-item {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n.show-item span {\r\n  font-size: 26px;\r\n  color: #f56b1a;\r\n}\r\n.point-item {\r\n  left: 15%;\r\n}\r\n.tuiguang-item {\r\n  right: 15%;\r\n}\r\n.qiandao {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\r\n}\r\n.qiandao-btn {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13278,7 +13312,7 @@


 // module
-exports.push([module.i, "\n.top-info[data-v-30d6ba8c] {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\n}\n.user-photo[data-v-30d6ba8c] {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\n}\n.user-photo > .user-photo-bg[data-v-30d6ba8c] {\r\n  background-image: url(https://sources.kdjack.cn/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\n}\n.user-photo > img[data-v-30d6ba8c],\r\n.user-photo > .el-icon-s-custom[data-v-30d6ba8c] {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\n}\n.user-photo > .el-icon-s-custom[data-v-30d6ba8c] {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\n}\n.user-photo > .tg-code[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\n}\n.top-breadcrumb[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\n}\n.user-photot > .qiandao[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\n}\n.tg-code > span[data-v-30d6ba8c] {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\n}\n.user-name[data-v-30d6ba8c] {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\n}\n.user-name span[data-v-30d6ba8c] {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n      -ms-user-select: none;\r\n          user-select: none;\n}\n.top-tip[data-v-30d6ba8c] {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-align: center;\r\n      align-items: center;\n}\n.top-tip > p[data-v-30d6ba8c] {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\n}\n.top-tip > span[data-v-30d6ba8c] {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\n}\n.top-tip > i[data-v-30d6ba8c] {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\n}\n.show-item[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  cursor: pointer;\n}\n.show-item span[data-v-30d6ba8c] {\r\n  font-size: 26px;\r\n  color: #f56b1a;\n}\n.point-item[data-v-30d6ba8c] {\r\n  left: 15%;\n}\n.tuiguang-item[data-v-30d6ba8c] {\r\n  right: 15%;\n}\n.qiandao[data-v-30d6ba8c] {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\n}\n.qiandao-btn[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/components/src\\components\\components/topInfo.vue"],"names":[],"mappings":";AA0hBA;EACA,YAAA;EACA,qBAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,8DAAA;EACA,mBAAA;EACA,sBAAA;EACA,aAAA;EACA,cAAA;EACA,eAAA;EACA,mBAAA;EACA,kBAAA;EACA,mBAAA;EACA,UAAA;EACA,4BAAA;EACA,UAAA;EACA,WAAA;CACA;AACA;;EAEA,mBAAA;EACA,0BAAA;EACA,gCAAA;EACA,aAAA;EACA,cAAA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,mBAAA;EACA,YAAA;EACA,UAAA;EACA,eAAA;EACA,gBAAA;CACA;AACA;EACA,mBAAA;EACA,UAAA;EACA,WAAA;CACA;AACA;EACA,mBAAA;EACA,eAAA;EACA,iBAAA;EACA,0BAAA;EACA,mBAAA;EACA,eAAA;EACA,WAAA;EACA,UAAA;EACA,WAAA;EACA,2BAAA;CACA;AACA;EACA,eAAA;EACA,kBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;CACA;AACA;EACA,gBAAA;EACA,kBAAA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;EACA,0BAAA;KAAA,uBAAA;MAAA,sBAAA;UAAA,kBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,gBAAA;EACA,iBAAA;EACA,sBAAA;MAAA,wBAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,oBAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;EACA,gBAAA;EACA,oBAAA;CACA;AACA;EACA,kBAAA;EACA,kBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;EACA,gBAAA;EACA,kBAAA;CACA;AACA;EACA,mBAAA;EACA,eAAA;EACA,sBAAA;EACA,WAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,uBAAA;MAAA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,eAAA;EACA,kBAAA;EACA,mBAAA;EACA,iBAAA;EACA,mBAAA;EACA,gBAAA;EACA,UAAA;EACA,WAAA;EACA,0BAAA;CACA;AACA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;CACA","file":"topInfo.vue","sourcesContent":["<template>\r\n  <div class=\"top-info\">\r\n    <div class=\"user-photo\">\r\n      <div class=\"top-breadcrumb\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item><span @click=\"gouHome\">首页</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 1\"><span @click=\"goList\">课时列表</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 2\">课时详情</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSponsor\" class=\"user-photo-bg\"></div>\r\n        <img :src=\"userInfo.avatar\" :class=\"{'is-sponsor': userInfo.isSponsor}\" @click=\"getUvId\" />\r\n      </template>\r\n      <i v-else @click=\"openLogin\" class=\"el-icon-s-custom\"></i>\r\n      <span class=\"tg-code\" @click=\"foo\">当前版本:<span>{{ version }}</span></span>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSign === 1\" class=\"qiandao\">已签到</div>\r\n        <el-button v-else @click=\"submitSign\" class=\"qiandao-btn\" :icon=\"[signStatus === 1 ? 'el-icon-loading' : '']\" type=\"warning\" plain>签到</el-button>\r\n      </template>\r\n    </div>\r\n    <template v-if=\"isLogin\">\r\n      <div class=\"user-name\">{{ getTimeText }}， {{ hideChart(userInfo.userName) }}<span class=\"logout-btn\" @click=\"logout\">[退出]</span></div>\r\n      <div class=\"top-tip\">\r\n        Token:\r\n        <el-button type=\"text\" @click=\"copyToken\"><i class=\"el-icon-connection\"></i>**********</el-button>\r\n        <el-popover placement=\"top\" width=\"300\" trigger=\"click\">\r\n          <el-form ref=\"refreshTokenFormRef\" :model=\"refreshTokenForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"输入密码\">\r\n              <el-input v-model=\"refreshTokenForm.password\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              刷新Token需要输入密码\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitRefresh\">刷新Token</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n          <i slot=\"reference\" style=\"cursor: pointer;\" class=\"el-icon-refresh\"></i>\r\n        </el-popover>\r\n      </div>\r\n      <!-- emailIsCheck -->\r\n      <div class=\"top-tip\">\r\n        推荐码:\r\n        <span>{{ userInfo.extensionCode || '******' }}</span>\r\n\r\n        <el-popover placement=\"top-start\" width=\"200\" trigger=\"hover\">\r\n          <span>邮箱未激活的用户，不影响功能的使用，但不能享受推荐得积分哟~!</span>\r\n          <br />\r\n          未收到邮件? <el-button type=\"text\" :disabled=\"sendStatus\" @click=\"sendEmail\">点我再次发送</el-button>\r\n          <p v-if=\"userInfo.emailIsCheck !== 1\" slot=\"reference\" style=\"cursor: pointer;\">未激活<i class=\"el-icon-warning-outline\"></i></p>\r\n        </el-popover>\r\n\r\n        <el-button v-if=\"userInfo.qqIsBinding\" type=\"text\">已绑Q: {{ hideChart(userInfo.qqNumber) }}</el-button>\r\n        <el-popover v-else placement=\"right\" width=\"400\" trigger=\"click\">\r\n          <el-form ref=\"bindingQQFormRef\" :model=\"bindingQQForm\" :rules=\"rules\" label-width=\"5px\">\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #349d09;\">成功绑定QQ后，可在Q群中进行签到等操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #f34545;\">为防止恶意绑定QQ，这里需要做2步操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              第一步: 填写QQ号(请注意: 绑定成功后不可修改):\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"bindingQQForm.qqNumber\" maxlength=\"15\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitQQ\">第一步: 保存QQ并获取Code</el-button>\r\n            </el-form-item>\r\n            <template v-if=\"qqCode || userInfo.qqCode\">\r\n              <el-form-item>\r\n                QQ绑定码为：{{ qqCode || userInfo.qqCode }}\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                第二步：使用QQ- {{ userInfo.qqNumber }} 在Q群中发送如下信息:\r\n                <br />\r\n                <el-tag style=\"cursor: pointer;\" @click=\"copyQQCode\">QQ绑定{{ qqCode || userInfo.qqCode }}(点击复制)</el-tag>\r\n              </el-form-item>\r\n            </template>\r\n          </el-form>\r\n          <el-button slot=\"reference\" type=\"text\">绑定QQ号</el-button>\r\n        </el-popover>\r\n      </div>\r\n      <div class=\"show-item point-item\" @click=\"openListPanel(1)\">\r\n        <span>{{ userInfo.integral || 0 }}</span>\r\n        <p>积分 <i :class=\"[refreshStatus === 1 ? 'el-icon-loading' : 'el-icon-refresh']\" @click.stop=\"refreshUserInfo\"></i></p>\r\n      </div>\r\n      <div class=\"show-item tuiguang-item\" @click=\"openListPanel(2)\">\r\n        <span>{{ userInfo.recommendUserCount || 0 }}</span>\r\n        <p>推广</p>\r\n      </div>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"user-name\" style=\"cursor: pointer;\" @click=\"openLogin\">立即登录</div>\r\n      <div class=\"top-tip\">未登录用户无法使用作业、习题、考试等功能</div>\r\n    </template>\r\n\r\n    <!-- 二级积分-推广弹框 -->\r\n    <el-drawer class=\"second-drawer\" :visible.sync=\"isShowdrawer\" :withHeader=\"false\" size=\"350px\" direction=\"ltr\" :append-to-body=\"true\">\r\n      <el-scrollbar style=\"height: 100%;\">\r\n        <div class=\"second-drawer-panel\" style=\"overflow:auto\">\r\n          <div class=\"top-title\">{{ dataType === 1 ? '积分明细' : '推广列表' }}</div>\r\n          <div class=\"cell-item\" v-for=\"(item, i) in dataList\" :key=\"i\">\r\n            <i v-if=\"dataType === 1\" :class=\"getItemIcon(item)\"></i>\r\n            <img v-else :src=\"item.avatar\" />\r\n            <div class=\"main\">\r\n              <span>{{ item.memo || item.school }}<span v-if=\"item.userName\"> - {{ item.userName }}</span></span>\r\n              <p>{{ formatTime(item.createTime) }}</p>\r\n            </div>\r\n            <span v-if=\"dataType === 1\">{{ item.type === 1 ? ' + ' : ' - ' }} {{ item.money }}</span>\r\n          </div>\r\n          <div class=\"load-more\" @click=\"loadDataList\">\r\n            <span v-if=\"loadState === 0\">加载更多</span>\r\n            <span v-else-if=\"loadState === 1\">\r\n              <i class=\"el-icon-loading\"></i>加载中\r\n            </span>\r\n            <span v-else style=\"color: #6f7695;\">没有更多了</span>\r\n          </div>\r\n          <el-backtop target=\".second-drawer .el-scrollbar__wrap\"></el-backtop>\r\n        </div>\r\n\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getExcToken } from '@/api/index'\r\nimport { queryUserIntegral, queryUserRecommend, userSign, refreshToken, sendActivateEmail, saveQQNumber } from '@/api/question'\r\nimport { version, storageTokenlKey } from '@/config'\r\nimport { hideChart, formatTime, md5Pwd } from '@/utils'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'platformType', 'universityId', 'courseSign', 'classroomId', 'userInfo']),\r\n    getTimeText() {\r\n      const hours = new Date().getHours()\r\n      if (hours > 5 && hours <= 10) {\r\n        return '早上好'\r\n      } else if (hours > 10 && hours <= 15) {\r\n        return '中午好'\r\n      } else if (hours > 15 && hours <= 19) {\r\n        return '下午好'\r\n      } else {\r\n        return '晚上好'\r\n      }\r\n    },\r\n    tokenBlank() {\r\n      return new Array(this.userInfo.token.length).fill('*').join('')\r\n    }\r\n  },\r\n  watch: {\r\n    async isShowdrawer(val) {\r\n      // 窗口关闭，重置查询条件\r\n      if (!val) {\r\n        this.dataList = []\r\n        this.currentPage = 1\r\n        this.loadState = 0\r\n        // this.totalPage = 1\r\n      } else {\r\n        await this.loadDataList()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      version,\r\n      hideChart,\r\n      isShowdrawer: false,\r\n      dataList: [],\r\n      pageSize: 20,\r\n      currentPage: 1,\r\n      totalPage: 1,\r\n      // 0：等待加载；1：加载中；-1：没有更多\r\n      loadState: 0,\r\n      // 1: 积分;2: 推广\r\n      dataType: 1,\r\n      qqCode: '',\r\n      isShowToken: false,\r\n      refreshTokenForm: {\r\n        password: ''\r\n      },\r\n      bindingQQForm: {\r\n        qqNumber: ''\r\n      },\r\n      rules: {\r\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n        qqNumber: [{ required: true, message: '请输入QQ号', trigger: 'blur' }]\r\n      },\r\n      // 刷新状态\r\n      refreshStatus: 0,\r\n      // 签到状态\r\n      signStatus: 0,\r\n      // 发送邮件\r\n      sendStatus: 0,\r\n      clickCount: 0\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime,\r\n    copyToken() {\r\n      GM_setClipboard(this.userInfo.token)\r\n      this.$message.success('Token已拷贝至剪切板~!')\r\n    },\r\n    copyQQCode() {\r\n      GM_setClipboard('QQ绑定' + (this.qqCode || this.userInfo.qqCode))\r\n      this.$message.success('已拷贝至剪切板~!')\r\n    },\r\n    async getUvId() {\r\n      if (this.clickCount < 4) {\r\n        this.clickCount++\r\n        return false\r\n      }\r\n      GM_setClipboard(this.universityId)\r\n      this.$message.success('uv_id已拷贝至剪切板~!')\r\n      this.clickCount = 0\r\n    },\r\n    // 退出\r\n    logout() {\r\n      this.$confirm('确定要退出吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 移除自动登录token\r\n        localStorage.removeItem(storageTokenlKey + 'auto_')\r\n        // 退出\r\n        this.$store.commit('updateIsLogin', false)\r\n      })\r\n    },\r\n    openLogin() {\r\n      this.$store.commit('updateIsShowLogin', true)\r\n    },\r\n    openListPanel(type) {\r\n      this.dataType = type\r\n      this.isShowdrawer = true\r\n    },\r\n    gouHome() {\r\n      if (this.pageLevel < 2) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/courselist'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/index'\r\n      }\r\n      location.href = url\r\n    },\r\n    goList() {\r\n      if (this.pageLevel < 3) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/lms/' + this.courseSign + '/' + this.classroomId + '/studycontent'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/studentLog/' + this.classroomId\r\n      }\r\n      location.href = url\r\n    },\r\n    async loadDataList() {\r\n      if (this.loadState === 0) {\r\n        this.loadState = 1\r\n        let data = []\r\n        if (this.dataType === 1) {\r\n          data = await queryUserIntegral({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        } else {\r\n          data = await queryUserRecommend({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        }\r\n        this.totalPage = data.data.totalPage\r\n        data.data.list.map((item) => this.dataList.push(item))\r\n        this.loadState = this.currentPage < this.totalPage ? 0 : -1\r\n        this.currentPage++\r\n      }\r\n    },\r\n    async submitSign() {\r\n      if (this.signStatus !== 0) return false\r\n      this.signStatus = 1\r\n      await setTimeout(async () => {\r\n        let data = await userSign({ userId: this.userInfo.id })\r\n        if (data.status * 1 === 200) {\r\n          this.$message.success('签到成功~!')\r\n        } else {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        // 查询用户信息-登录\r\n        data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        this.signStatus = 0\r\n      }, 1000)\r\n    },\r\n    getItemIcon(item) {\r\n      if (item.type === 1) {\r\n        // 收入类型（1：上传题目；2：签到；3：推广；4：绑定邮箱）\r\n        switch (item.incomeType) {\r\n          case 1:\r\n            return 'el-icon-upload2'\r\n          case 2:\r\n            return 'el-icon-date'\r\n          case 3:\r\n            return 'el-icon-connection'\r\n          case 4:\r\n            return 'el-icon-postcard'\r\n        }\r\n      } else {\r\n        // 支出类型（1：查询问题）\r\n        switch (item.expendType) {\r\n          case 1:\r\n            return 'el-icon-search'\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    async submitRefresh() {\r\n      this.$refs.refreshTokenFormRef.validate(async (valid) => {\r\n        if (valid) {\r\n          const postData = {\r\n            id: this.userInfo.id,\r\n            email: this.userInfo.email,\r\n            token: this.userInfo.token,\r\n            password: md5Pwd(this.refreshTokenForm.password)\r\n          }\r\n          const loginData = await refreshToken(postData)\r\n          if (loginData.status * 1 === 200) {\r\n            // 保存用户信息\r\n            const userInfo = loginData.data\r\n            userInfo.lastQueryTime = new Date().getTime()\r\n            // 保存用户信息\r\n            this.$store.commit('updateUserInfo', userInfo)\r\n            this.$message.success('刷新令牌成功~!')\r\n          } else {\r\n            this.$message.error('密码输入有误~!')\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async submitQQ() {\r\n      if (this.bindingQQForm.qqNumber.length <= 0) {\r\n        this.$message.warning('请填写QQ号~!')\r\n        return false\r\n      }\r\n      const postData = {\r\n        userId: this.userInfo.id,\r\n        token: this.userInfo.token,\r\n        qqNumber: this.bindingQQForm.qqNumber\r\n      }\r\n      const resultData = await saveQQNumber(postData)\r\n      if (resultData.status * 1 === 200) {\r\n        // 保存用户信息\r\n        this.qqCode = resultData.data\r\n        const userInfo = JSON.parse(JSON.stringify(this.userInfo))\r\n        userInfo.qqNumber = this.bindingQQForm.qqNumber\r\n        userInfo.qqCode = this.qqCode\r\n        // 保存用户信息\r\n        this.$store.commit('updateUserInfo', userInfo)\r\n        this.$message.success('保存成功~!')\r\n      } else {\r\n        this.$message.error('保存失败~!')\r\n      }\r\n    },\r\n    async sendEmail() {\r\n      if (this.sendStatus !== 0) return false\r\n      this.sendStatus = 1\r\n      await setTimeout(async () => {\r\n        const data = await sendActivateEmail({ userId: this.userInfo.id })\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n          return false\r\n        }\r\n        this.$message.success('邮件已发送，请注意查收~!')\r\n        this.sendStatus = 0\r\n      }, 1000)\r\n    },\r\n    async refreshUserInfo() {\r\n      if (this.refreshStatus !== 0) return false\r\n      this.refreshStatus = 1\r\n      setTimeout(async () => {\r\n        const data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        } else {\r\n          this.$message.success('刷新成功~!')\r\n        }\r\n        this.refreshStatus = 0\r\n      }, 1000)\r\n    },\r\n    async foo() {\r\n      // 这里设置一下\r\n      let csrftoken = ''\r\n      const cookieList = document.cookie.split('; ')\r\n      for (let i = 0; i < cookieList.length; i++) {\r\n        if (cookieList[i].indexOf('csrftoken=') >= 0) {\r\n          csrftoken = cookieList[i].replace('csrftoken=', '')\r\n          break\r\n        }\r\n      }\r\n      // 作业题页面\r\n      let data = await getExcToken({ exam_id: '159246', user_id: '37611722', classroom_id: this.classroomId, no_loading: true }, csrftoken, this.universityId)\r\n      console.log('data: ', data)\r\n      // crypt\r\n      data = data.data.data.crypt\r\n      let tempUrl = 'https://changjiang-exam.yuketang.cn/login?exam_id=159246&user_id=37611722&crypt=__crypt&next=https://changjiang-exam.yuketang.cn/result/159246?isFrom=1'\r\n      tempUrl = tempUrl.replace('__crypt', encodeURIComponent(data))\r\n      console.log('tempUrl: ', tempUrl)\r\n      debugger\r\n      window.location.href = tempUrl\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.userInfo) {\r\n      console.log('this.userInfo: ', this.userInfo)\r\n      this.qqCode = this.userInfo.qqCode || ''\r\n      if (this.userInfo.qqNumber) {\r\n        this.bindingQQForm.qqNumber = this.userInfo.qqNumber\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n.second-drawer {\r\n  pointer-events: auto;\r\n}\r\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\r\n}\r\n.second-drawer-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n.second-drawer-panel .point-calc {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\r\n}\r\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\r\n}\r\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n}\r\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\r\n}\r\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\r\n}\r\n\r\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\r\n}\r\n.second-drawer-panel .point-calc > span {\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n}\r\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n}\r\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n}\r\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\r\n}\r\n</style>\r\n<style scoped>\r\n.top-info {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\r\n}\r\n.user-photo {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.user-photo > .user-photo-bg {\r\n  background-image: url(https://sources.kdjack.cn/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\r\n}\r\n.user-photo > img,\r\n.user-photo > .el-icon-s-custom {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n.user-photo > .el-icon-s-custom {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\r\n}\r\n.user-photo > .tg-code {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\r\n}\r\n.top-breadcrumb {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\r\n}\r\n.user-photot > .qiandao {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\r\n}\r\n.tg-code > span {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\r\n}\r\n.user-name {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\r\n}\r\n.user-name span {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n.top-tip {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.top-tip > p {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n}\r\n.top-tip > span {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\r\n}\r\n.top-tip > i {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\r\n}\r\n.show-item {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n.show-item span {\r\n  font-size: 26px;\r\n  color: #f56b1a;\r\n}\r\n.point-item {\r\n  left: 15%;\r\n}\r\n.tuiguang-item {\r\n  right: 15%;\r\n}\r\n.qiandao {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\r\n}\r\n.qiandao-btn {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.top-info[data-v-30d6ba8c] {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\n}\n.user-photo[data-v-30d6ba8c] {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\n}\n.user-photo > .user-photo-bg[data-v-30d6ba8c] {\r\n  background-image: url(https://sources.sunsets-deprecated-domain-attention.top/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\n}\n.user-photo > img[data-v-30d6ba8c],\r\n.user-photo > .el-icon-s-custom[data-v-30d6ba8c] {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\n}\n.user-photo > .el-icon-s-custom[data-v-30d6ba8c] {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\n}\n.user-photo > .tg-code[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\n}\n.top-breadcrumb[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\n}\n.user-photot > .qiandao[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\n}\n.tg-code > span[data-v-30d6ba8c] {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\n}\n.user-name[data-v-30d6ba8c] {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\n}\n.user-name span[data-v-30d6ba8c] {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n      -ms-user-select: none;\r\n          user-select: none;\n}\n.top-tip[data-v-30d6ba8c] {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  -ms-flex-pack: center;\r\n      justify-content: center;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-align: center;\r\n      align-items: center;\n}\n.top-tip > p[data-v-30d6ba8c] {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\n}\n.top-tip > span[data-v-30d6ba8c] {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\n}\n.top-tip > i[data-v-30d6ba8c] {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\n}\n.show-item[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-direction: column;\r\n      flex-direction: column;\r\n  -ms-flex-align: center;\r\n      align-items: center;\r\n  cursor: pointer;\n}\n.show-item span[data-v-30d6ba8c] {\r\n  font-size: 26px;\r\n  color: #f56b1a;\n}\n.point-item[data-v-30d6ba8c] {\r\n  left: 15%;\n}\n.tuiguang-item[data-v-30d6ba8c] {\r\n  right: 15%;\n}\n.qiandao[data-v-30d6ba8c] {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\n}\n.qiandao-btn[data-v-30d6ba8c] {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/components/src\\components\\components/topInfo.vue"],"names":[],"mappings":";AA0hBA;EACA,YAAA;EACA,qBAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,8DAAA;EACA,mBAAA;EACA,sBAAA;EACA,aAAA;EACA,cAAA;EACA,eAAA;EACA,mBAAA;EACA,kBAAA;EACA,mBAAA;EACA,UAAA;EACA,4BAAA;EACA,UAAA;EACA,WAAA;CACA;AACA;;EAEA,mBAAA;EACA,0BAAA;EACA,gCAAA;EACA,aAAA;EACA,cAAA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,mBAAA;EACA,YAAA;EACA,UAAA;EACA,eAAA;EACA,gBAAA;CACA;AACA;EACA,mBAAA;EACA,UAAA;EACA,WAAA;CACA;AACA;EACA,mBAAA;EACA,eAAA;EACA,iBAAA;EACA,0BAAA;EACA,mBAAA;EACA,eAAA;EACA,WAAA;EACA,UAAA;EACA,WAAA;EACA,2BAAA;CACA;AACA;EACA,eAAA;EACA,kBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;CACA;AACA;EACA,gBAAA;EACA,kBAAA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;EACA,0BAAA;KAAA,uBAAA;MAAA,sBAAA;UAAA,kBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,gBAAA;EACA,iBAAA;EACA,sBAAA;MAAA,wBAAA;EACA,qBAAA;EAAA,cAAA;EACA,uBAAA;MAAA,oBAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;EACA,gBAAA;EACA,oBAAA;CACA;AACA;EACA,kBAAA;EACA,kBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;EACA,gBAAA;EACA,kBAAA;CACA;AACA;EACA,mBAAA;EACA,eAAA;EACA,sBAAA;EACA,WAAA;EACA,qBAAA;EAAA,cAAA;EACA,2BAAA;MAAA,uBAAA;EACA,uBAAA;MAAA,oBAAA;EACA,gBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,eAAA;EACA,kBAAA;EACA,mBAAA;EACA,iBAAA;EACA,mBAAA;EACA,gBAAA;EACA,UAAA;EACA,WAAA;EACA,0BAAA;CACA;AACA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;CACA","file":"topInfo.vue","sourcesContent":["<template>\r\n  <div class=\"top-info\">\r\n    <div class=\"user-photo\">\r\n      <div class=\"top-breadcrumb\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item><span @click=\"gouHome\">首页</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 1\"><span @click=\"goList\">课时列表</span></el-breadcrumb-item>\r\n          <el-breadcrumb-item v-if=\"pageLevel > 2\">课时详情</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSponsor\" class=\"user-photo-bg\"></div>\r\n        <img :src=\"userInfo.avatar\" :class=\"{'is-sponsor': userInfo.isSponsor}\" @click=\"getUvId\" />\r\n      </template>\r\n      <i v-else @click=\"openLogin\" class=\"el-icon-s-custom\"></i>\r\n      <span class=\"tg-code\" @click=\"foo\">当前版本:<span>{{ version }}</span></span>\r\n      <template v-if=\"isLogin\">\r\n        <div v-if=\"userInfo.isSign === 1\" class=\"qiandao\">已签到</div>\r\n        <el-button v-else @click=\"submitSign\" class=\"qiandao-btn\" :icon=\"[signStatus === 1 ? 'el-icon-loading' : '']\" type=\"warning\" plain>签到</el-button>\r\n      </template>\r\n    </div>\r\n    <template v-if=\"isLogin\">\r\n      <div class=\"user-name\">{{ getTimeText }}， {{ hideChart(userInfo.userName) }}<span class=\"logout-btn\" @click=\"logout\">[退出]</span></div>\r\n      <div class=\"top-tip\">\r\n        Token:\r\n        <el-button type=\"text\" @click=\"copyToken\"><i class=\"el-icon-connection\"></i>**********</el-button>\r\n        <el-popover placement=\"top\" width=\"300\" trigger=\"click\">\r\n          <el-form ref=\"refreshTokenFormRef\" :model=\"refreshTokenForm\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"输入密码\">\r\n              <el-input v-model=\"refreshTokenForm.password\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              刷新Token需要输入密码\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitRefresh\">刷新Token</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n          <i slot=\"reference\" style=\"cursor: pointer;\" class=\"el-icon-refresh\"></i>\r\n        </el-popover>\r\n      </div>\r\n      <!-- emailIsCheck -->\r\n      <div class=\"top-tip\">\r\n        推荐码:\r\n        <span>{{ userInfo.extensionCode || '******' }}</span>\r\n\r\n        <el-popover placement=\"top-start\" width=\"200\" trigger=\"hover\">\r\n          <span>邮箱未激活的用户，不影响功能的使用，但不能享受推荐得积分哟~!</span>\r\n          <br />\r\n          未收到邮件? <el-button type=\"text\" :disabled=\"sendStatus\" @click=\"sendEmail\">点我再次发送</el-button>\r\n          <p v-if=\"userInfo.emailIsCheck !== 1\" slot=\"reference\" style=\"cursor: pointer;\">未激活<i class=\"el-icon-warning-outline\"></i></p>\r\n        </el-popover>\r\n\r\n        <el-button v-if=\"userInfo.qqIsBinding\" type=\"text\">已绑Q: {{ hideChart(userInfo.qqNumber) }}</el-button>\r\n        <el-popover v-else placement=\"right\" width=\"400\" trigger=\"click\">\r\n          <el-form ref=\"bindingQQFormRef\" :model=\"bindingQQForm\" :rules=\"rules\" label-width=\"5px\">\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #349d09;\">成功绑定QQ后，可在Q群中进行签到等操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <span style=\"color: #f34545;\">为防止恶意绑定QQ，这里需要做2步操作</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              第一步: 填写QQ号(请注意: 绑定成功后不可修改):\r\n            </el-form-item>\r\n            <el-form-item label=\"\">\r\n              <el-input v-model=\"bindingQQForm.qqNumber\" maxlength=\"15\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"submitQQ\">第一步: 保存QQ并获取Code</el-button>\r\n            </el-form-item>\r\n            <template v-if=\"qqCode || userInfo.qqCode\">\r\n              <el-form-item>\r\n                QQ绑定码为：{{ qqCode || userInfo.qqCode }}\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                第二步：使用QQ- {{ userInfo.qqNumber }} 在Q群中发送如下信息:\r\n                <br />\r\n                <el-tag style=\"cursor: pointer;\" @click=\"copyQQCode\">QQ绑定{{ qqCode || userInfo.qqCode }}(点击复制)</el-tag>\r\n              </el-form-item>\r\n            </template>\r\n          </el-form>\r\n          <el-button slot=\"reference\" type=\"text\">绑定QQ号</el-button>\r\n        </el-popover>\r\n      </div>\r\n      <div class=\"show-item point-item\" @click=\"openListPanel(1)\">\r\n        <span>{{ userInfo.integral || 0 }}</span>\r\n        <p>积分 <i :class=\"[refreshStatus === 1 ? 'el-icon-loading' : 'el-icon-refresh']\" @click.stop=\"refreshUserInfo\"></i></p>\r\n      </div>\r\n      <div class=\"show-item tuiguang-item\" @click=\"openListPanel(2)\">\r\n        <span>{{ userInfo.recommendUserCount || 0 }}</span>\r\n        <p>推广</p>\r\n      </div>\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"user-name\" style=\"cursor: pointer;\" @click=\"openLogin\">立即登录</div>\r\n      <div class=\"top-tip\">未登录用户无法使用作业、习题、考试等功能</div>\r\n    </template>\r\n\r\n    <!-- 二级积分-推广弹框 -->\r\n    <el-drawer class=\"second-drawer\" :visible.sync=\"isShowdrawer\" :withHeader=\"false\" size=\"350px\" direction=\"ltr\" :append-to-body=\"true\">\r\n      <el-scrollbar style=\"height: 100%;\">\r\n        <div class=\"second-drawer-panel\" style=\"overflow:auto\">\r\n          <div class=\"top-title\">{{ dataType === 1 ? '积分明细' : '推广列表' }}</div>\r\n          <div class=\"cell-item\" v-for=\"(item, i) in dataList\" :key=\"i\">\r\n            <i v-if=\"dataType === 1\" :class=\"getItemIcon(item)\"></i>\r\n            <img v-else :src=\"item.avatar\" />\r\n            <div class=\"main\">\r\n              <span>{{ item.memo || item.school }}<span v-if=\"item.userName\"> - {{ item.userName }}</span></span>\r\n              <p>{{ formatTime(item.createTime) }}</p>\r\n            </div>\r\n            <span v-if=\"dataType === 1\">{{ item.type === 1 ? ' + ' : ' - ' }} {{ item.money }}</span>\r\n          </div>\r\n          <div class=\"load-more\" @click=\"loadDataList\">\r\n            <span v-if=\"loadState === 0\">加载更多</span>\r\n            <span v-else-if=\"loadState === 1\">\r\n              <i class=\"el-icon-loading\"></i>加载中\r\n            </span>\r\n            <span v-else style=\"color: #6f7695;\">没有更多了</span>\r\n          </div>\r\n          <el-backtop target=\".second-drawer .el-scrollbar__wrap\"></el-backtop>\r\n        </div>\r\n\r\n      </el-scrollbar>\r\n    </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getExcToken } from '@/api/index'\r\nimport { queryUserIntegral, queryUserRecommend, userSign, refreshToken, sendActivateEmail, saveQQNumber } from '@/api/question'\r\nimport { version, storageTokenlKey } from '@/config'\r\nimport { hideChart, formatTime, md5Pwd } from '@/utils'\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState(['pageLevel', 'isLogin', 'platformType', 'universityId', 'courseSign', 'classroomId', 'userInfo']),\r\n    getTimeText() {\r\n      const hours = new Date().getHours()\r\n      if (hours > 5 && hours <= 10) {\r\n        return '早上好'\r\n      } else if (hours > 10 && hours <= 15) {\r\n        return '中午好'\r\n      } else if (hours > 15 && hours <= 19) {\r\n        return '下午好'\r\n      } else {\r\n        return '晚上好'\r\n      }\r\n    },\r\n    tokenBlank() {\r\n      return new Array(this.userInfo.token.length).fill('*').join('')\r\n    }\r\n  },\r\n  watch: {\r\n    async isShowdrawer(val) {\r\n      // 窗口关闭，重置查询条件\r\n      if (!val) {\r\n        this.dataList = []\r\n        this.currentPage = 1\r\n        this.loadState = 0\r\n        // this.totalPage = 1\r\n      } else {\r\n        await this.loadDataList()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      version,\r\n      hideChart,\r\n      isShowdrawer: false,\r\n      dataList: [],\r\n      pageSize: 20,\r\n      currentPage: 1,\r\n      totalPage: 1,\r\n      // 0：等待加载；1：加载中；-1：没有更多\r\n      loadState: 0,\r\n      // 1: 积分;2: 推广\r\n      dataType: 1,\r\n      qqCode: '',\r\n      isShowToken: false,\r\n      refreshTokenForm: {\r\n        password: ''\r\n      },\r\n      bindingQQForm: {\r\n        qqNumber: ''\r\n      },\r\n      rules: {\r\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\r\n        qqNumber: [{ required: true, message: '请输入QQ号', trigger: 'blur' }]\r\n      },\r\n      // 刷新状态\r\n      refreshStatus: 0,\r\n      // 签到状态\r\n      signStatus: 0,\r\n      // 发送邮件\r\n      sendStatus: 0,\r\n      clickCount: 0\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime,\r\n    copyToken() {\r\n      GM_setClipboard(this.userInfo.token)\r\n      this.$message.success('Token已拷贝至剪切板~!')\r\n    },\r\n    copyQQCode() {\r\n      GM_setClipboard('QQ绑定' + (this.qqCode || this.userInfo.qqCode))\r\n      this.$message.success('已拷贝至剪切板~!')\r\n    },\r\n    async getUvId() {\r\n      if (this.clickCount < 4) {\r\n        this.clickCount++\r\n        return false\r\n      }\r\n      GM_setClipboard(this.universityId)\r\n      this.$message.success('uv_id已拷贝至剪切板~!')\r\n      this.clickCount = 0\r\n    },\r\n    // 退出\r\n    logout() {\r\n      this.$confirm('确定要退出吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 移除自动登录token\r\n        localStorage.removeItem(storageTokenlKey + 'auto_')\r\n        // 退出\r\n        this.$store.commit('updateIsLogin', false)\r\n      })\r\n    },\r\n    openLogin() {\r\n      this.$store.commit('updateIsShowLogin', true)\r\n    },\r\n    openListPanel(type) {\r\n      this.dataType = type\r\n      this.isShowdrawer = true\r\n    },\r\n    gouHome() {\r\n      if (this.pageLevel < 2) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/courselist'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/index'\r\n      }\r\n      location.href = url\r\n    },\r\n    goList() {\r\n      if (this.pageLevel < 3) return false\r\n      let url = 'https://' + location.hostname\r\n      if (this.platformType === 1) {\r\n        url += '/pro/lms/' + this.courseSign + '/' + this.classroomId + '/studycontent'\r\n      } else if (this.platformType === 2) {\r\n        url += '/v2/web/studentLog/' + this.classroomId\r\n      }\r\n      location.href = url\r\n    },\r\n    async loadDataList() {\r\n      if (this.loadState === 0) {\r\n        this.loadState = 1\r\n        let data = []\r\n        if (this.dataType === 1) {\r\n          data = await queryUserIntegral({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        } else {\r\n          data = await queryUserRecommend({ currentPage: this.currentPage, pagesize: this.pagesize, userId: this.userInfo.id })\r\n        }\r\n        this.totalPage = data.data.totalPage\r\n        data.data.list.map((item) => this.dataList.push(item))\r\n        this.loadState = this.currentPage < this.totalPage ? 0 : -1\r\n        this.currentPage++\r\n      }\r\n    },\r\n    async submitSign() {\r\n      if (this.signStatus !== 0) return false\r\n      this.signStatus = 1\r\n      await setTimeout(async () => {\r\n        let data = await userSign({ userId: this.userInfo.id })\r\n        if (data.status * 1 === 200) {\r\n          this.$message.success('签到成功~!')\r\n        } else {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        // 查询用户信息-登录\r\n        data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        }\r\n        this.signStatus = 0\r\n      }, 1000)\r\n    },\r\n    getItemIcon(item) {\r\n      if (item.type === 1) {\r\n        // 收入类型（1：上传题目；2：签到；3：推广；4：绑定邮箱）\r\n        switch (item.incomeType) {\r\n          case 1:\r\n            return 'el-icon-upload2'\r\n          case 2:\r\n            return 'el-icon-date'\r\n          case 3:\r\n            return 'el-icon-connection'\r\n          case 4:\r\n            return 'el-icon-postcard'\r\n        }\r\n      } else {\r\n        // 支出类型（1：查询问题）\r\n        switch (item.expendType) {\r\n          case 1:\r\n            return 'el-icon-search'\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    async submitRefresh() {\r\n      this.$refs.refreshTokenFormRef.validate(async (valid) => {\r\n        if (valid) {\r\n          const postData = {\r\n            id: this.userInfo.id,\r\n            email: this.userInfo.email,\r\n            token: this.userInfo.token,\r\n            password: md5Pwd(this.refreshTokenForm.password)\r\n          }\r\n          const loginData = await refreshToken(postData)\r\n          if (loginData.status * 1 === 200) {\r\n            // 保存用户信息\r\n            const userInfo = loginData.data\r\n            userInfo.lastQueryTime = new Date().getTime()\r\n            // 保存用户信息\r\n            this.$store.commit('updateUserInfo', userInfo)\r\n            this.$message.success('刷新令牌成功~!')\r\n          } else {\r\n            this.$message.error('密码输入有误~!')\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async submitQQ() {\r\n      if (this.bindingQQForm.qqNumber.length <= 0) {\r\n        this.$message.warning('请填写QQ号~!')\r\n        return false\r\n      }\r\n      const postData = {\r\n        userId: this.userInfo.id,\r\n        token: this.userInfo.token,\r\n        qqNumber: this.bindingQQForm.qqNumber\r\n      }\r\n      const resultData = await saveQQNumber(postData)\r\n      if (resultData.status * 1 === 200) {\r\n        // 保存用户信息\r\n        this.qqCode = resultData.data\r\n        const userInfo = JSON.parse(JSON.stringify(this.userInfo))\r\n        userInfo.qqNumber = this.bindingQQForm.qqNumber\r\n        userInfo.qqCode = this.qqCode\r\n        // 保存用户信息\r\n        this.$store.commit('updateUserInfo', userInfo)\r\n        this.$message.success('保存成功~!')\r\n      } else {\r\n        this.$message.error('保存失败~!')\r\n      }\r\n    },\r\n    async sendEmail() {\r\n      if (this.sendStatus !== 0) return false\r\n      this.sendStatus = 1\r\n      await setTimeout(async () => {\r\n        const data = await sendActivateEmail({ userId: this.userInfo.id })\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n          return false\r\n        }\r\n        this.$message.success('邮件已发送，请注意查收~!')\r\n        this.sendStatus = 0\r\n      }, 1000)\r\n    },\r\n    async refreshUserInfo() {\r\n      if (this.refreshStatus !== 0) return false\r\n      this.refreshStatus = 1\r\n      setTimeout(async () => {\r\n        const data = await this.$store.dispatch('submitUserLogin')\r\n        if (data.status * 1 !== 200) {\r\n          this.$store.commit('updateErrorMsg', data.errorMsg)\r\n        } else {\r\n          this.$message.success('刷新成功~!')\r\n        }\r\n        this.refreshStatus = 0\r\n      }, 1000)\r\n    },\r\n    async foo() {\r\n      // 这里设置一下\r\n      let csrftoken = ''\r\n      const cookieList = document.cookie.split('; ')\r\n      for (let i = 0; i < cookieList.length; i++) {\r\n        if (cookieList[i].indexOf('csrftoken=') >= 0) {\r\n          csrftoken = cookieList[i].replace('csrftoken=', '')\r\n          break\r\n        }\r\n      }\r\n      // 作业题页面\r\n      let data = await getExcToken({ exam_id: '159246', user_id: '37611722', classroom_id: this.classroomId, no_loading: true }, csrftoken, this.universityId)\r\n      console.log('data: ', data)\r\n      // crypt\r\n      data = data.data.data.crypt\r\n      let tempUrl = 'https://changjiang-exam.yuketang.cn/login?exam_id=159246&user_id=37611722&crypt=__crypt&next=https://changjiang-exam.yuketang.cn/result/159246?isFrom=1'\r\n      tempUrl = tempUrl.replace('__crypt', encodeURIComponent(data))\r\n      console.log('tempUrl: ', tempUrl)\r\n      debugger\r\n      window.location.href = tempUrl\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.userInfo) {\r\n      console.log('this.userInfo: ', this.userInfo)\r\n      this.qqCode = this.userInfo.qqCode || ''\r\n      if (this.userInfo.qqNumber) {\r\n        this.bindingQQForm.qqNumber = this.userInfo.qqNumber\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.top-breadcrumb .el-breadcrumb__inner span,\r\n.top-breadcrumb .el-breadcrumb__inner.is-link,\r\n.top-breadcrumb .el-breadcrumb__item:last-child .el-breadcrumb__inner {\r\n  color: #e3e3e3;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n.second-drawer {\r\n  pointer-events: auto;\r\n}\r\n.second-drawer .el-drawer.ltr {\r\n  border-radius: 0 10px 10px 0 !important;\r\n  background: #31364d;\r\n  max-width: 100%;\r\n}\r\n.second-drawer .el-drawer__body {\r\n  overflow: hidden;\r\n}\r\n.second-drawer .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n.second-drawer .second-drawer-panel {\r\n  color: #dfdfdf;\r\n  padding: 20px 0;\r\n}\r\n.second-drawer-panel {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.second-drawer-panel .top-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n.second-drawer-panel .point-calc {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n.second-drawer-panel .cell-item {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n  cursor: pointer;\r\n  padding: 5px 20px;\r\n  line-height: 25px;\r\n  font-size: 13px;\r\n  border-bottom: 1px solid #4d5370;\r\n}\r\n.second-drawer-panel .cell-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.second-drawer-panel .cell-item:hover {\r\n  background: #404661;\r\n}\r\n.second-drawer-panel .cell-item > i {\r\n  font-size: 20px;\r\n  background: #4b5378;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n}\r\n.second-drawer-panel .cell-item > img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 50%;\r\n  border: none;\r\n}\r\n.second-drawer-panel .cell-item .main {\r\n  width: 100%;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.second-drawer-panel .cell-item .main > p {\r\n  font-size: 11px;\r\n  color: #6f7695;\r\n}\r\n\r\n.second-drawer-panel .cell-item > span {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  min-width: 50px;\r\n  text-align: right;\r\n}\r\n.second-drawer-panel .point-calc > span {\r\n  display: flex;\r\n  width: 50%;\r\n  text-align: center;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #cdcdcd;\r\n}\r\n.second-drawer-panel .point-calc p {\r\n  color: #f56b1a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n}\r\n.second-drawer-panel .load-more {\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n}\r\n.second-drawer-panel .el-backtop {\r\n  left: 300px;\r\n}\r\n</style>\r\n<style scoped>\r\n.top-info {\r\n  width: 100%;\r\n  padding-bottom: 10px;\r\n  position: relative;\r\n}\r\n.user-photo {\r\n  width: 100%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n.user-photo > .user-photo-bg {\r\n  background-image: url(https://sources.sunsets-deprecated-domain-attention.top/photo-bg.png);\r\n  border-radius: 50%;\r\n  background-size: 100%;\r\n  width: 150px;\r\n  height: 150px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  padding-top: 30px;\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  top: 35px;\r\n  z-index: 1;\r\n}\r\n.user-photo > img,\r\n.user-photo > .el-icon-s-custom {\r\n  border-radius: 50%;\r\n  border: 1px solid #a9a9a9;\r\n  box-shadow: 1px 1px 3px #ffffff;\r\n  width: 120px;\r\n  height: 120px;\r\n  margin-top: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n.user-photo > .el-icon-s-custom {\r\n  cursor: pointer;\r\n  color: #959494;\r\n  background: #e5e5e5;\r\n  font-size: 99px;\r\n}\r\n.user-photo > .tg-code {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 15px;\r\n  color: #919191;\r\n  font-size: 12px;\r\n}\r\n.top-breadcrumb {\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 20px;\r\n}\r\n.user-photot > .qiandao {\r\n  position: absolute;\r\n  display: block;\r\n  padding: 3px 8px;\r\n  border: 1px solid #f7b159;\r\n  border-radius: 5px;\r\n  color: #f7b159;\r\n  z-index: 9;\r\n  top: 76px;\r\n  right: 67%;\r\n  transform: rotateZ(-49deg);\r\n}\r\n.tg-code > span {\r\n  color: #b9b9b9;\r\n  margin-left: 10px;\r\n}\r\n.user-name {\r\n  color: #efefef;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 24px;\r\n  position: relative;\r\n}\r\n.user-name span {\r\n  font-size: 12px;\r\n  margin-left: 50px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 20px;\r\n  color: #8a90ab;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n.top-tip {\r\n  color: #9097bd;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  margin-top: 10px;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.top-tip > p {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n  color: #8a90ab;\r\n  font-size: 12px;\r\n  font-weight: normal;\r\n}\r\n.top-tip > span {\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  color: #d99704;\r\n}\r\n.top-tip > i {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 5px;\r\n}\r\n.show-item {\r\n  position: absolute;\r\n  color: #8f8f8f;\r\n  /* font-size: 14px; */\r\n  top: 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n.show-item span {\r\n  font-size: 26px;\r\n  color: #f56b1a;\r\n}\r\n.point-item {\r\n  left: 15%;\r\n}\r\n.tuiguang-item {\r\n  right: 15%;\r\n}\r\n.qiandao {\r\n  color: #d99704;\r\n  border: 1px solid;\r\n  position: absolute;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n  top: 54px;\r\n  right: 24%;\r\n  transform: rotateZ(45deg);\r\n}\r\n.qiandao-btn {\r\n  position: absolute;\r\n  top: 40px;\r\n  right: 20px;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13292,7 +13326,7 @@


 // module
-exports.push([module.i, "\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/session.vue"],"names":[],"mappings":";AA4FA;EACA,oBAAA;CACA","file":"session.vue","sourcesContent":["<template>\r\n  <div class=\"session-panel\">\r\n    <!-- 获取sesionId弹框 -->\r\n    <el-dialog v-el-drag-dialog title=\"手动获取sessionId教程\" width=\"600px\" :show-close=\"false\" :modal-append-to-body=\"false\" :visible.sync=\"isShowSession\">\r\n      <el-steps direction=\"vertical\" :active=\"5\" style=\"margin-top: 20px\">\r\n        <el-step title=\"1. 打开调试工具\" description=\"按下组合键: (windows用户) ctrl + shift + j | (MAC用户) option(alt) + command + j \"></el-step>\r\n        <el-step title=\"2. 找到并复制sessionid (点击图片可查看大图)\">\r\n          <template slot=\"description\">\r\n            中文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[0]\" :preview-src-list=\"teachImgList\"></el-image>\r\n            英文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[1]\" :preview-src-list=\"teachImgList\"></el-image>\r\n          </template>\r\n        </el-step>\r\n        <el-step title=\"3. 粘贴sessionid\">\r\n          <template slot=\"description\">\r\n            <el-form ref=\"sessionFormRef\" :model=\"sessionForm\" :rules=\"rules\" label-width=\"100px\">\r\n              <el-form-item label=\"sessionid\" prop=\"sessionId\">\r\n                <el-input style=\"width: 300px;\" v-model=\"sessionForm.sessionId\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"success\" @click=\"checkSession\">确定</el-button>\r\n                <el-button @click=\"closeDialog\">取消</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-step>\r\n      </el-steps>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapState(['isShowSession', 'platformType'])\r\n  },\r\n  watch: {\r\n    isShowSession(val) {\r\n      if (val) {\r\n        this.sessionForm.sessionId = localStorage.getItem('sessionid')\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      teachImgList: ['https://sources.kdjack.cn/yky/teach-cn.png', 'https://sources.kdjack.cn/ykt/teach-en.png'],\r\n      sessionForm: {\r\n        sessionId: ''\r\n      },\r\n      rules: {\r\n        sessionId: [{ required: true, message: '请填写sessionid', trigger: 'blur' }]\r\n      },\r\n      isChecking: false\r\n    }\r\n  },\r\n  methods: {\r\n    checkSession() {\r\n      this.$refs.sessionFormRef.validate((valid) => {\r\n        if (valid) {\r\n          localStorage.setItem('sessionid', this.sessionForm.sessionId)\r\n          this.$message.success('sessionid 保存成功，关闭窗口后失效，快去试试传题吧~!')\r\n          this.$store.commit('updateIsShowSession', false)\r\n        }\r\n      })\r\n    },\r\n    closeDialog() {\r\n      this.$store.commit('updateIsShowSession', false)\r\n    }\r\n  },\r\n  mounted() {\r\n    // 如果是V1，这里可以直接从本地获取sessionid\r\n    if (this.platformType === 1) {\r\n      let apiHeader = localStorage.getItem('API_HEADER')\r\n      if (apiHeader) {\r\n        apiHeader = JSON.parse(apiHeader)\r\n        // 获取session_id\r\n        localStorage.setItem('sessionid', apiHeader.session_id)\r\n        this.sessionForm.sessionId = apiHeader.session_id\r\n        // console.log('以获取session_id: ', apiHeader.session_id)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.session-panel {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n<style>\r\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/session.vue"],"names":[],"mappings":";AA4FA;EACA,oBAAA;CACA","file":"session.vue","sourcesContent":["<template>\r\n  <div class=\"session-panel\">\r\n    <!-- 获取sesionId弹框 -->\r\n    <el-dialog v-el-drag-dialog title=\"手动获取sessionId教程\" width=\"600px\" :show-close=\"false\" :modal-append-to-body=\"false\" :visible.sync=\"isShowSession\">\r\n      <el-steps direction=\"vertical\" :active=\"5\" style=\"margin-top: 20px\">\r\n        <el-step title=\"1. 打开调试工具\" description=\"按下组合键: (windows用户) ctrl + shift + j | (MAC用户) option(alt) + command + j \"></el-step>\r\n        <el-step title=\"2. 找到并复制sessionid (点击图片可查看大图)\">\r\n          <template slot=\"description\">\r\n            中文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[0]\" :preview-src-list=\"teachImgList\"></el-image>\r\n            英文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[1]\" :preview-src-list=\"teachImgList\"></el-image>\r\n          </template>\r\n        </el-step>\r\n        <el-step title=\"3. 粘贴sessionid\">\r\n          <template slot=\"description\">\r\n            <el-form ref=\"sessionFormRef\" :model=\"sessionForm\" :rules=\"rules\" label-width=\"100px\">\r\n              <el-form-item label=\"sessionid\" prop=\"sessionId\">\r\n                <el-input style=\"width: 300px;\" v-model=\"sessionForm.sessionId\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"success\" @click=\"checkSession\">确定</el-button>\r\n                <el-button @click=\"closeDialog\">取消</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-step>\r\n      </el-steps>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapState(['isShowSession', 'platformType'])\r\n  },\r\n  watch: {\r\n    isShowSession(val) {\r\n      if (val) {\r\n        this.sessionForm.sessionId = localStorage.getItem('sessionid')\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      teachImgList: ['https://sources.sunsets-deprecated-domain-attention.top/yky/teach-cn.png', 'https://sources.sunsets-deprecated-domain-attention.top/ykt/teach-en.png'],\r\n      sessionForm: {\r\n        sessionId: ''\r\n      },\r\n      rules: {\r\n        sessionId: [{ required: true, message: '请填写sessionid', trigger: 'blur' }]\r\n      },\r\n      isChecking: false\r\n    }\r\n  },\r\n  methods: {\r\n    checkSession() {\r\n      this.$refs.sessionFormRef.validate((valid) => {\r\n        if (valid) {\r\n          localStorage.setItem('sessionid', this.sessionForm.sessionId)\r\n          this.$message.success('sessionid 保存成功，关闭窗口后失效，快去试试传题吧~!')\r\n          this.$store.commit('updateIsShowSession', false)\r\n        }\r\n      })\r\n    },\r\n    closeDialog() {\r\n      this.$store.commit('updateIsShowSession', false)\r\n    }\r\n  },\r\n  mounted() {\r\n    // 如果是V1，这里可以直接从本地获取sessionid\r\n    if (this.platformType === 1) {\r\n      let apiHeader = localStorage.getItem('API_HEADER')\r\n      if (apiHeader) {\r\n        apiHeader = JSON.parse(apiHeader)\r\n        // 获取session_id\r\n        localStorage.setItem('sessionid', apiHeader.session_id)\r\n        this.sessionForm.sessionId = apiHeader.session_id\r\n        // console.log('以获取session_id: ', apiHeader.session_id)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.session-panel {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n<style>\r\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13306,7 +13340,7 @@


 // module
-exports.push([module.i, "\n.session-panel[data-v-311cd1b6] {\r\n  pointer-events: auto;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/session.vue"],"names":[],"mappings":";AAuFA;EACA,qBAAA;CACA","file":"session.vue","sourcesContent":["<template>\r\n  <div class=\"session-panel\">\r\n    <!-- 获取sesionId弹框 -->\r\n    <el-dialog v-el-drag-dialog title=\"手动获取sessionId教程\" width=\"600px\" :show-close=\"false\" :modal-append-to-body=\"false\" :visible.sync=\"isShowSession\">\r\n      <el-steps direction=\"vertical\" :active=\"5\" style=\"margin-top: 20px\">\r\n        <el-step title=\"1. 打开调试工具\" description=\"按下组合键: (windows用户) ctrl + shift + j | (MAC用户) option(alt) + command + j \"></el-step>\r\n        <el-step title=\"2. 找到并复制sessionid (点击图片可查看大图)\">\r\n          <template slot=\"description\">\r\n            中文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[0]\" :preview-src-list=\"teachImgList\"></el-image>\r\n            英文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[1]\" :preview-src-list=\"teachImgList\"></el-image>\r\n          </template>\r\n        </el-step>\r\n        <el-step title=\"3. 粘贴sessionid\">\r\n          <template slot=\"description\">\r\n            <el-form ref=\"sessionFormRef\" :model=\"sessionForm\" :rules=\"rules\" label-width=\"100px\">\r\n              <el-form-item label=\"sessionid\" prop=\"sessionId\">\r\n                <el-input style=\"width: 300px;\" v-model=\"sessionForm.sessionId\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"success\" @click=\"checkSession\">确定</el-button>\r\n                <el-button @click=\"closeDialog\">取消</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-step>\r\n      </el-steps>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapState(['isShowSession', 'platformType'])\r\n  },\r\n  watch: {\r\n    isShowSession(val) {\r\n      if (val) {\r\n        this.sessionForm.sessionId = localStorage.getItem('sessionid')\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      teachImgList: ['https://sources.kdjack.cn/yky/teach-cn.png', 'https://sources.kdjack.cn/ykt/teach-en.png'],\r\n      sessionForm: {\r\n        sessionId: ''\r\n      },\r\n      rules: {\r\n        sessionId: [{ required: true, message: '请填写sessionid', trigger: 'blur' }]\r\n      },\r\n      isChecking: false\r\n    }\r\n  },\r\n  methods: {\r\n    checkSession() {\r\n      this.$refs.sessionFormRef.validate((valid) => {\r\n        if (valid) {\r\n          localStorage.setItem('sessionid', this.sessionForm.sessionId)\r\n          this.$message.success('sessionid 保存成功，关闭窗口后失效，快去试试传题吧~!')\r\n          this.$store.commit('updateIsShowSession', false)\r\n        }\r\n      })\r\n    },\r\n    closeDialog() {\r\n      this.$store.commit('updateIsShowSession', false)\r\n    }\r\n  },\r\n  mounted() {\r\n    // 如果是V1，这里可以直接从本地获取sessionid\r\n    if (this.platformType === 1) {\r\n      let apiHeader = localStorage.getItem('API_HEADER')\r\n      if (apiHeader) {\r\n        apiHeader = JSON.parse(apiHeader)\r\n        // 获取session_id\r\n        localStorage.setItem('sessionid', apiHeader.session_id)\r\n        this.sessionForm.sessionId = apiHeader.session_id\r\n        // console.log('以获取session_id: ', apiHeader.session_id)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.session-panel {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n<style>\r\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\r\n}\r\n</style>"],"sourceRoot":""}]);
+exports.push([module.i, "\n.session-panel[data-v-311cd1b6] {\r\n  pointer-events: auto;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/components/src\\components/session.vue"],"names":[],"mappings":";AAuFA;EACA,qBAAA;CACA","file":"session.vue","sourcesContent":["<template>\r\n  <div class=\"session-panel\">\r\n    <!-- 获取sesionId弹框 -->\r\n    <el-dialog v-el-drag-dialog title=\"手动获取sessionId教程\" width=\"600px\" :show-close=\"false\" :modal-append-to-body=\"false\" :visible.sync=\"isShowSession\">\r\n      <el-steps direction=\"vertical\" :active=\"5\" style=\"margin-top: 20px\">\r\n        <el-step title=\"1. 打开调试工具\" description=\"按下组合键: (windows用户) ctrl + shift + j | (MAC用户) option(alt) + command + j \"></el-step>\r\n        <el-step title=\"2. 找到并复制sessionid (点击图片可查看大图)\">\r\n          <template slot=\"description\">\r\n            中文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[0]\" :preview-src-list=\"teachImgList\"></el-image>\r\n            英文界面:\r\n            <el-image style=\"width: 100px; height: 100px\" :src=\"teachImgList[1]\" :preview-src-list=\"teachImgList\"></el-image>\r\n          </template>\r\n        </el-step>\r\n        <el-step title=\"3. 粘贴sessionid\">\r\n          <template slot=\"description\">\r\n            <el-form ref=\"sessionFormRef\" :model=\"sessionForm\" :rules=\"rules\" label-width=\"100px\">\r\n              <el-form-item label=\"sessionid\" prop=\"sessionId\">\r\n                <el-input style=\"width: 300px;\" v-model=\"sessionForm.sessionId\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"success\" @click=\"checkSession\">确定</el-button>\r\n                <el-button @click=\"closeDialog\">取消</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-step>\r\n      </el-steps>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapState(['isShowSession', 'platformType'])\r\n  },\r\n  watch: {\r\n    isShowSession(val) {\r\n      if (val) {\r\n        this.sessionForm.sessionId = localStorage.getItem('sessionid')\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      teachImgList: ['https://sources.sunsets-deprecated-domain-attention.top/yky/teach-cn.png', 'https://sources.sunsets-deprecated-domain-attention.top/ykt/teach-en.png'],\r\n      sessionForm: {\r\n        sessionId: ''\r\n      },\r\n      rules: {\r\n        sessionId: [{ required: true, message: '请填写sessionid', trigger: 'blur' }]\r\n      },\r\n      isChecking: false\r\n    }\r\n  },\r\n  methods: {\r\n    checkSession() {\r\n      this.$refs.sessionFormRef.validate((valid) => {\r\n        if (valid) {\r\n          localStorage.setItem('sessionid', this.sessionForm.sessionId)\r\n          this.$message.success('sessionid 保存成功，关闭窗口后失效，快去试试传题吧~!')\r\n          this.$store.commit('updateIsShowSession', false)\r\n        }\r\n      })\r\n    },\r\n    closeDialog() {\r\n      this.$store.commit('updateIsShowSession', false)\r\n    }\r\n  },\r\n  mounted() {\r\n    // 如果是V1，这里可以直接从本地获取sessionid\r\n    if (this.platformType === 1) {\r\n      let apiHeader = localStorage.getItem('API_HEADER')\r\n      if (apiHeader) {\r\n        apiHeader = JSON.parse(apiHeader)\r\n        // 获取session_id\r\n        localStorage.setItem('sessionid', apiHeader.session_id)\r\n        this.sessionForm.sessionId = apiHeader.session_id\r\n        // console.log('以获取session_id: ', apiHeader.session_id)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.session-panel {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n<style>\r\n.session-panel .el-step__description {\r\n  margin-bottom: 30px;\r\n}\r\n</style>"],"sourceRoot":""}]);

 // exports

@@ -13432,7 +13466,7 @@


 // module
-exports.push([module.i, "\n#appTest[data-v-7ba5bd90] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  /* z-index: 6999; */\r\n  pointer-events: none;\n}\n.binding-dialog[data-v-7ba5bd90] {\r\n  pointer-events: auto;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/src/App.vue"],"names":[],"mappings":";AAuYA;EACA,mBAAA;EACA,QAAA;EACA,OAAA;EACA,aAAA;EACA,cAAA;EACA,iBAAA;EACA,oBAAA;EACA,qBAAA;CACA;AACA;EACA,qBAAA;CACA","file":"App.vue","sourcesContent":["<template>\r\n  <div id=\"appTest\">\r\n    <!-- 设置 -->\r\n    <settingVue v-if=\"window === top && platformType !== 10\"></settingVue>\r\n    <!-- 屏蔽切屏 -->\r\n    <screenVue v-if=\"windowType === 'shijuan'\"></screenVue>\r\n    <!-- 主页 -->\r\n    <div class=\"main-panel\" v-if=\"windowType === 'main'\">\r\n      <!-- 加载数据 -->\r\n      <loadingVue v-if=\"pageLevel < 3\"></loadingVue>\r\n      <!-- 视频弹框 -->\r\n      <iframeVue v-if=\"pageLevel < 3\"></iframeVue>\r\n    </div>\r\n    <!-- 视频页 -->\r\n    <videoVue v-if=\"windowType === 'video'\"></videoVue>\r\n    <!-- PPT页 -->\r\n    <pptVue v-if=\"windowType === 'ppt'\"></pptVue>\r\n    <!-- 习题页面 -->\r\n    <homeworkVue v-if=\"windowType === 'zuoye' || windowType === 'shijuan' || windowType === 'datika'\"></homeworkVue>\r\n    <!-- 获取sessionId -->\r\n    <sessionVue v-if=\"window === top\"></sessionVue>\r\n    <!-- 考试首页 -->\r\n    <examVue v-if=\"windowType === 'kaoshi'\"></examVue>\r\n    <!-- 登录页面 -->\r\n    <loginVue v-if=\"!isLogin\"></loginVue>\r\n    <!-- 图文页面 -->\r\n    <graphVue v-if=\"windowType === 'tuwen'\"></graphVue>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport settingVue from './components/setting.vue'\r\nimport loadingVue from './components/loading.vue'\r\nimport iframeVue from './components/iframe.vue'\r\nimport videoVue from './components/video.vue'\r\nimport pptVue from './components/ppt.vue'\r\nimport screenVue from './components/screen.vue'\r\nimport homeworkVue from './components/homework.vue'\r\nimport sessionVue from './components/session.vue'\r\nimport examVue from './components/exam.vue'\r\nimport loginVue from './components/login.vue'\r\nimport graphVue from './components/graph.vue'\r\nimport { mapState } from 'vuex'\r\nimport { clearUploadData, storageUploadKey } from '@/config'\r\n\r\nconst pageTypeList = [\r\n  // v2\r\n  { k: '/studentLog/', v: -2, classroom_id: 4 },\r\n  { k: '/video-student/', v: 0, classroom_id: 5, leaf_id: 6 },\r\n  { k: '/live/', v: 2, course_sign: 4, classroom_id: 5, leaf_id: 7 },\r\n  { k: '/graph/', v: 3, classroom_id: 4, leaf_id: 5 },\r\n  { k: '/forum/', v: 4, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/exam/', v: 5, classroom_id: 4, leaf_type_id: 5, exam_id: 2 },\r\n  { k: '/exercise/', v: 6, classroom_id: 6, leaf_id: 7, sku_id: 8 },\r\n  { k: '/student-v3/', v: 7, classroom_id: 4, courseware_id: 5, leaf_id: 6 },\r\n  { k: '/noticeView/', v: 8, classroom_id: 4, leaf_id: 5 },\r\n  { k: '/studentCards/', v: 9, classroom_id: 4, courseware_id: 5, leaf_id: 6 },\r\n  { k: 'exam', v: 20, exam_id: 2 },\r\n  { k: '/studentQuiz/', v: 21, courseware_id: 4 },\r\n  { k: '/quizSummary/', v: 22, classroom_id: 4, courseware_id: 5 },\r\n  // v1\r\n  { k: '/studycontent', v: -12, course_sign: 3, classroom_id: 4 },\r\n  { k: '/score', v: -12, course_sign: 3, classroom_id: 4 },\r\n  { k: '/video/', v: 10, course_sign: 3, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/homework/', v: 16, course_sign: 3, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/courselist', v: -11 }\r\n]\r\n\r\nexport default {\r\n  components: {\r\n    settingVue,\r\n    loadingVue,\r\n    iframeVue,\r\n    videoVue,\r\n    screenVue,\r\n    pptVue,\r\n    homeworkVue,\r\n    sessionVue,\r\n    examVue,\r\n    loginVue,\r\n    graphVue\r\n  },\r\n  computed: {\r\n    ...mapState(['platformType', 'pageLevel', 'examSet', 'isShowDrawer', 'userInfo', 'errorMsg', 'warningMsg', 'isLogin', 'isShowEmail'])\r\n  },\r\n  watch: {\r\n    isShowDrawer(val) {\r\n      if (val && this.localDriver) {\r\n        localStorage.setItem('btnGuideIsShow', 1)\r\n        this.localDriver.moveNext()\r\n      }\r\n    },\r\n    errorMsg(val) {\r\n      if (val) {\r\n        this.$notify.error({\r\n          title: '出错了，请稍后重试或联系作者~!',\r\n          dangerouslyUseHTMLString: true,\r\n          message: val,\r\n          duration: 0\r\n        })\r\n        this.$store.commit('updateErrorMsg', '')\r\n      }\r\n    },\r\n    warningMsg(val) {\r\n      if (val) {\r\n        this.$notify.warning({\r\n          title: '提示',\r\n          dangerouslyUseHTMLString: true,\r\n          message: val,\r\n          duration: 0\r\n        })\r\n        this.$store.commit('updateWarningMsg', '')\r\n      }\r\n    },\r\n    // 用户登录\r\n    isLogin(val) {\r\n      if (val) {\r\n        this.clearUploadData()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      windowType: '',\r\n      // 上一次打开面板时的网页URL-这里判断一下用户是否切换了网页 - 从而判断是否需要重新计算\r\n      oldLocationHref: '',\r\n      localDriver: '',\r\n      emailForm: {\r\n        email: ''\r\n      },\r\n      rules: {\r\n        email: [\r\n          { required: true, message: '邮箱必填', trigger: 'blur' },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/\r\n              if (!value) {\r\n                return true\r\n              }\r\n              setTimeout(() => {\r\n                if (mailReg.test(value)) {\r\n                  callback()\r\n                } else {\r\n                  callback(new Error('请输入正确的邮箱格式'))\r\n                }\r\n              }, 100)\r\n            },\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async loopCheckCardLoad() {\r\n      console.log(\"window.getComputedStyle(document.getElementById('problem_cont')).display: \", window.getComputedStyle(document.getElementById('problem_cont')).display)\r\n      console.log('window.quizData: ', window)\r\n      if (window.getComputedStyle(document.getElementById('problem_cont')).display === 'block' && window.quizData) {\r\n        // 像父类发送数据\r\n        top.postMessage(window.quizData, '*')\r\n        console.log('已发送父类数据: ', window.quizData)\r\n        return false\r\n      }\r\n      await setTimeout(async () => {\r\n        await this.loopCheckCardLoad()\r\n        console.log('循环监听答题卡子页面.....: ', location.pathname)\r\n      }, 5000)\r\n    },\r\n    // 初始化当前页面\r\n    async initPage(notAddBtn) {\r\n      if (location.hostname === 'examination.xuetangx.com' || location.hostname.indexOf('-exam.yuketang.cn') >= 0) {\r\n        // 考试页面\r\n        this.$store.commit('changePlatformType', 10)\r\n      }\r\n      //  else if (location.pathname.indexOf('/v/quiz/quiz_') >= 0) {\r\n      //   // 答题卡内部页面\r\n      //   this.$store.commit('changePlatformType', 11)\r\n      //   // 这里需要往父类页面传送数据\r\n      //   await setTimeout(async () => {\r\n      //     await this.loopCheckCardLoad()\r\n      //     console.log('监听答题卡子页面.....')\r\n      //   }, 1000)\r\n      //   // 这里直接返回了\r\n      //   return false\r\n      // }\r\n      else {\r\n        if (!notAddBtn) {\r\n          // 判定雨课堂版本\r\n          this.$store.commit('changePlatformType', location.pathname.indexOf('/v2/') >= 0 ? 2 : 1)\r\n          // 非弹出页面，才插入按钮\r\n          if (top === window) {\r\n            // 添加button\r\n            this.addBtn()\r\n          }\r\n        }\r\n      }\r\n      await this.initPageData(notAddBtn)\r\n    },\r\n    // 初始化页面路径\r\n    async initPageData(notAddBtn) {\r\n      let pageType = -1\r\n      // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT； 20：试卷; 21： 答题卡\r\n      // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n      let item = ''\r\n      for (let i = 0; i < pageTypeList.length; i++) {\r\n        item = pageTypeList[i]\r\n        if (location.pathname.indexOf(item.k) >= 0 || location.host.indexOf(item.k) >= 0) {\r\n          pageType = item.v\r\n          const tempList = location.pathname.split('/')\r\n          if (this.platformType !== 10) {\r\n            // classroom_id\r\n            if (item.classroom_id) this.$store.commit('updateClassroomId', tempList[item.classroom_id])\r\n            // leaf_id\r\n            if (item.leaf_id) this.$store.commit('updateLeafId', tempList[item.leaf_id])\r\n            // leaf_type_id\r\n            if (item.leaf_type_id) this.$store.commit('updateLeafTypeId', tempList[item.leaf_type_id])\r\n            // courseware_id\r\n            if (item.courseware_id) this.$store.commit('updateCoursewareId', tempList[item.courseware_id])\r\n            // course_sign\r\n            if (item.course_sign) this.$store.commit('updateCourseSign', tempList[item.course_sign])\r\n          } else {\r\n            // exam_id\r\n            pageType = 20\r\n            if (item.exam_id) this.$store.commit('updateExamId', tempList[item.exam_id])\r\n          }\r\n          // 单独处理下考试 /v2/web/exam/classroom_id/leaf_type_id?leaf_id=leaf_id\r\n          if (pageType === 5) {\r\n            const tempList = location.search.split(/[?\\&]/g).filter((item) => item.indexOf('leaf_id') >= 0)\r\n            if (tempList && tempList.length > 0) {\r\n              this.$store.commit('updateLeafId', tempList[0].split('=')[1])\r\n            }\r\n          }\r\n          break\r\n        }\r\n      }\r\n      this.$store.commit('updatePageType', pageType)\r\n      // 最优先排除考试页面\r\n      if (pageType === 20) {\r\n        this.$store.commit('updatePageLevel', -1)\r\n      } else {\r\n        if (pageType >= 0) this.$store.commit('updatePageLevel', 3)\r\n      }\r\n      // 课程列表页面\r\n      if (pageType === -2 || pageType === -12) this.$store.commit('updatePageLevel', 2)\r\n      // 首页\r\n      if (pageType === -1 || pageType === -11) this.$store.commit('updatePageLevel', 1)\r\n      switch (pageType) {\r\n        case 0:\r\n          break\r\n      }\r\n      if (pageType === 0 || pageType === 10) {\r\n        // 视频详情页面\r\n        this.windowType = 'video'\r\n      } else if (pageType === 9) {\r\n        // PPT详情页面\r\n        this.windowType = 'ppt'\r\n      } else if (pageType === 3 || pageType === 13) {\r\n        // PPT详情页面\r\n        this.windowType = 'tuwen'\r\n      } else if (pageType === 5 || pageType === 15) {\r\n        // 考试页面\r\n        this.windowType = 'kaoshi'\r\n      } else if (pageType === 6 || pageType === 16) {\r\n        // 习题页面\r\n        this.windowType = 'zuoye'\r\n      } else if (pageType === 20) {\r\n        // 试卷页面\r\n        this.windowType = 'shijuan'\r\n      } else if (pageType === 21 || pageType === 22) {\r\n        // 答题卡页面\r\n        this.windowType = 'datika'\r\n      } else {\r\n        this.windowType = 'main'\r\n      }\r\n      if (!notAddBtn) {\r\n        this.$nextTick(async () => {\r\n          // 查询用户信息-登录\r\n          await this.$store.dispatch('loadUserInfo')\r\n        })\r\n      }\r\n    },\r\n    // 增加脚本设置按钮\r\n    addBtn() {\r\n      let ulDom = {}\r\n      let liDom = {}\r\n      if ((!document.getElementsByClassName('left__menu') || document.getElementsByClassName('left__menu').length <= 0) && (!document.getElementsByClassName('left-nav') || document.getElementsByClassName('left-nav').length <= 0)) {\r\n        setTimeout(() => {\r\n          this.addBtn()\r\n        }, 1000)\r\n        return false\r\n      }\r\n      // 增加按钮存在校验\r\n      if (document.getElementById('scriptBtn') && document.getElementById('scriptBtn').children && document.getElementById('scriptBtn').children.length > 0) return\r\n      switch (this.platformType) {\r\n        case 1:\r\n          ulDom = document.getElementsByClassName('left-nav')[0].getElementsByClassName('nav-item nav-hover')\r\n          liDom = ulDom[ulDom.length - 1].cloneNode(true)\r\n          liDom.classList.remove('active')\r\n          // liDom.removeAttribute('id')\r\n          liDom.setAttribute('id', 'scriptBtn')\r\n          liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi')\r\n          liDom.getElementsByTagName('div')[0].innerText = '挂机脚本'\r\n          liDom.onclick = this.showSettingPanel\r\n          document.getElementsByClassName('user-wrapper')[0].before(liDom)\r\n          break\r\n        case 2:\r\n          ulDom = document.getElementsByClassName('left__menu')[0].getElementsByTagName('ul')[0]\r\n          liDom = ulDom.children[ulDom.children.length - 1].cloneNode(true)\r\n          liDom.setAttribute('id', 'scriptBtn')\r\n          liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi')\r\n          liDom.getElementsByTagName('span')[0].innerText = '挂机脚本'\r\n          liDom.onclick = this.showSettingPanel\r\n          ulDom.appendChild(liDom)\r\n          break\r\n      }\r\n    },\r\n    showSettingPanel() {\r\n      // 上一次打开面板时的网页URL-这里判断一下用户是否切换了网页 - 从而判断是否需要重新计算\r\n      if (!this.oldLocationHref || this.oldLocationHref !== location.pathname) {\r\n        // 只有这种情况，才需要重新计算相关\r\n        this.initPage(true)\r\n      }\r\n      this.$store.commit('showSettingDrawer')\r\n    },\r\n    // 每隔1秒钟，检测一下window改变情况\r\n    checkCurrentUrl() {\r\n      if (this.oldLocationHref !== location.pathname) {\r\n        if (this.oldLocationHref) this.$store.commit('updateUrlChangeFlug')\r\n        this.oldLocationHref = location.pathname\r\n        // 重新初始化一下页面\r\n        this.initPage(true)\r\n      }\r\n      setTimeout(() => {\r\n        this.checkCurrentUrl()\r\n      }, 1000)\r\n    },\r\n    loopShowGuide() {\r\n      if (!document.getElementById('scriptBtn')) {\r\n        setTimeout(() => {\r\n          this.loopShowGuide()\r\n        }, 500)\r\n        return false\r\n      }\r\n      // 创建一个引导\r\n      this.localDriver = this.$guide.show([\r\n        {\r\n          element: '#scriptBtn',\r\n          popover: {\r\n            title: '点击这里开始',\r\n            description: '挂机脚本按钮已迁移到这里了~!',\r\n            position: 'right-center'\r\n          }\r\n        }\r\n      ])\r\n    },\r\n    clearUploadData() {\r\n      if (localStorage.getItem('clearUploadData') != clearUploadData) {\r\n        // 删除数据上传\r\n        localStorage.removeItem(storageUploadKey + this.userInfo.userNumber)\r\n        // 设定版本\r\n        localStorage.setItem('clearUploadData', clearUploadData)\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    if (location.pathname.indexOf('discussion') >= 0 || location.pathname.indexOf('v/quiz/quiz_') >= 0 || location.pathname === '' || location.pathname === '/') {\r\n      return false\r\n    }\r\n    this.$nextTick(async () => {\r\n      this.oldLocationHref = location.pathname\r\n      // 初始化页面\r\n      await this.initPage()\r\n\r\n      if (this.windowType !== 'shijuan') {\r\n        // 初始化设置数据\r\n        this.$store.commit('initSettingData')\r\n        // 循环检测\r\n        this.checkCurrentUrl()\r\n        setTimeout(() => {\r\n          // 创建一个引导\r\n          if (!localStorage.getItem('btnGuideIsShow')) {\r\n            this.loopShowGuide()\r\n          }\r\n        }, 1000)\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n#appTest {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  /* z-index: 6999; */\r\n  pointer-events: none;\r\n}\r\n.binding-dialog {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]);
+exports.push([module.i, "\n#appTest[data-v-7ba5bd90] {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  /* z-index: 6999; */\r\n  pointer-events: none;\n}\n.binding-dialog[data-v-7ba5bd90] {\r\n  pointer-events: auto;\n}\r\n", "", {"version":3,"sources":["E:/Git/jack/web/ykt-web/src/src/App.vue"],"names":[],"mappings":";AAuYA;EACA,mBAAA;EACA,QAAA;EACA,OAAA;EACA,aAAA;EACA,cAAA;EACA,iBAAA;EACA,oBAAA;EACA,qBAAA;CACA;AACA;EACA,qBAAA;CACA","file":"App.vue","sourcesContent":["<template>\r\n  <div id=\"appTest\">\r\n    <!-- 设置 -->\r\n    <settingVue v-if=\"window === top && platformType !== 10\"></settingVue>\r\n    <!-- 屏蔽切屏 -->\r\n    <screenVue v-if=\"windowType === 'shijuan'\"></screenVue>\r\n    <!-- 主页 -->\r\n    <div class=\"main-panel\" v-if=\"windowType === 'main'\">\r\n      <!-- 加载数据 -->\r\n      <loadingVue v-if=\"pageLevel < 3\"></loadingVue>\r\n      <!-- 视频弹框 -->\r\n      <iframeVue v-if=\"pageLevel < 3\"></iframeVue>\r\n    </div>\r\n    <!-- 视频页 -->\r\n    <videoVue v-if=\"windowType === 'video'\"></videoVue>\r\n    <!-- PPT页 -->\r\n    <pptVue v-if=\"windowType === 'ppt'\"></pptVue>\r\n    <!-- 习题页面 -->\r\n    <homeworkVue v-if=\"windowType === 'zuoye' || windowType === 'shijuan' || windowType === 'datika'\"></homeworkVue>\r\n    <!-- 获取sessionId -->\r\n    <sessionVue v-if=\"window === top\"></sessionVue>\r\n    <!-- 考试首页 -->\r\n    <examVue v-if=\"windowType === 'kaoshi'\"></examVue>\r\n    <!-- 登录页面 -->\r\n    <loginVue v-if=\"!isLogin\"></loginVue>\r\n    <!-- 图文页面 -->\r\n    <graphVue v-if=\"windowType === 'tuwen'\"></graphVue>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport settingVue from './components/setting.vue'\r\nimport loadingVue from './components/loading.vue'\r\nimport iframeVue from './components/iframe.vue'\r\nimport videoVue from './components/video.vue'\r\nimport pptVue from './components/ppt.vue'\r\nimport screenVue from './components/screen.vue'\r\nimport homeworkVue from './components/homework.vue'\r\nimport sessionVue from './components/session.vue'\r\nimport examVue from './components/exam.vue'\r\nimport loginVue from './components/login.vue'\r\nimport graphVue from './components/graph.vue'\r\nimport { mapState } from 'vuex'\r\nimport { clearUploadData, storageUploadKey } from '@/config'\r\n\r\nconst pageTypeList = [\r\n  // v2\r\n  { k: '/studentLog/', v: -2, classroom_id: 4 },\r\n  { k: '/video-student/', v: 0, classroom_id: 5, leaf_id: 6 },\r\n  { k: '/live/', v: 2, course_sign: 4, classroom_id: 5, leaf_id: 7 },\r\n  { k: '/graph/', v: 3, classroom_id: 4, leaf_id: 5 },\r\n  { k: '/forum/', v: 4, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/exam/', v: 5, classroom_id: 4, leaf_type_id: 5, exam_id: 2 },\r\n  { k: '/exercise/', v: 6, classroom_id: 6, leaf_id: 7, sku_id: 8 },\r\n  { k: '/student-v3/', v: 7, classroom_id: 4, courseware_id: 5, leaf_id: 6 },\r\n  { k: '/noticeView/', v: 8, classroom_id: 4, leaf_id: 5 },\r\n  { k: '/studentCards/', v: 9, classroom_id: 4, courseware_id: 5, leaf_id: 6 },\r\n  { k: 'exam', v: 20, exam_id: 2 },\r\n  { k: '/studentQuiz/', v: 21, courseware_id: 4 },\r\n  { k: '/quizSummary/', v: 22, classroom_id: 4, courseware_id: 5 },\r\n  // v1\r\n  { k: '/studycontent', v: -12, course_sign: 3, classroom_id: 4 },\r\n  { k: '/score', v: -12, course_sign: 3, classroom_id: 4 },\r\n  { k: '/video/', v: 10, course_sign: 3, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/homework/', v: 16, course_sign: 3, classroom_id: 4, leaf_id: 6 },\r\n  { k: '/courselist', v: -11 }\r\n]\r\n\r\nexport default {\r\n  components: {\r\n    settingVue,\r\n    loadingVue,\r\n    iframeVue,\r\n    videoVue,\r\n    screenVue,\r\n    pptVue,\r\n    homeworkVue,\r\n    sessionVue,\r\n    examVue,\r\n    loginVue,\r\n    graphVue\r\n  },\r\n  computed: {\r\n    ...mapState(['platformType', 'pageLevel', 'examSet', 'isShowDrawer', 'userInfo', 'errorMsg', 'warningMsg', 'isLogin', 'isShowEmail'])\r\n  },\r\n  watch: {\r\n    isShowDrawer(val) {\r\n      if (val && this.localDriver) {\r\n        localStorage.setItem('btnGuideIsShow', 1)\r\n        this.localDriver.moveNext()\r\n      }\r\n    },\r\n    errorMsg(val) {\r\n      if (val) {\r\n        this.$notify.error({\r\n          title: '出错了，请稍后重试或联系作者~!',\r\n          dangerouslyUseHTMLString: true,\r\n          message: val,\r\n          duration: 0\r\n        })\r\n        this.$store.commit('updateErrorMsg', '')\r\n      }\r\n    },\r\n    warningMsg(val) {\r\n      if (val) {\r\n        this.$notify.warning({\r\n          title: '提示',\r\n          dangerouslyUseHTMLString: true,\r\n          message: val,\r\n          duration: 0\r\n        })\r\n        this.$store.commit('updateWarningMsg', '')\r\n      }\r\n    },\r\n    // 用户登录\r\n    isLogin(val) {\r\n      if (val) {\r\n        this.clearUploadData()\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      windowType: '',\r\n      // 上一次打开面板时的网页URL-这里判断一下用户是否切换了网页 - 从而判断是否需要重新计算\r\n      oldLocationHref: '',\r\n      localDriver: '',\r\n      emailForm: {\r\n        email: ''\r\n      },\r\n      rules: {\r\n        email: [\r\n          { required: true, message: '邮箱必填', trigger: 'blur' },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              const mailReg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/\r\n              if (!value) {\r\n                return true\r\n              }\r\n              setTimeout(() => {\r\n                if (mailReg.test(value)) {\r\n                  callback()\r\n                } else {\r\n                  callback(new Error('请输入正确的邮箱格式'))\r\n                }\r\n              }, 100)\r\n            },\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async loopCheckCardLoad() {\r\n      console.log(\"window.getComputedStyle(document.getElementById('problem_cont')).display: \", window.getComputedStyle(document.getElementById('problem_cont')).display)\r\n      console.log('window.quizData: ', window)\r\n      if (window.getComputedStyle(document.getElementById('problem_cont')).display === 'block' && window.quizData) {\r\n        // 像父类发送数据\r\n        top.postMessage(window.quizData, '*')\r\n        console.log('已发送父类数据: ', window.quizData)\r\n        return false\r\n      }\r\n      await setTimeout(async () => {\r\n        await this.loopCheckCardLoad()\r\n        console.log('循环监听答题卡子页面.....: ', location.pathname)\r\n      }, 5000)\r\n    },\r\n    // 初始化当前页面\r\n    async initPage(notAddBtn) {\r\n      if (location.hostname === 'examination.xuetangx.com' || location.hostname.indexOf('-exam.yuketang.cn') >= 0) {\r\n        // 考试页面\r\n        this.$store.commit('changePlatformType', 10)\r\n      }\r\n      //  else if (location.pathname.indexOf('/v/quiz/quiz_') >= 0) {\r\n      //   // 答题卡内部页面\r\n      //   this.$store.commit('changePlatformType', 11)\r\n      //   // 这里需要往父类页面传送数据\r\n      //   await setTimeout(async () => {\r\n      //     await this.loopCheckCardLoad()\r\n      //     console.log('监听答题卡子页面.....')\r\n      //   }, 1000)\r\n      //   // 这里直接返回了\r\n      //   return false\r\n      // }\r\n      else {\r\n        if (!notAddBtn) {\r\n          // 判定雨课堂版本\r\n          this.$store.commit('changePlatformType', location.pathname.indexOf('/v2/') >= 0 ? 2 : 1)\r\n          // 非弹出页面，才插入按钮\r\n          if (top === window) {\r\n            // 添加button\r\n            this.addBtn()\r\n          }\r\n        }\r\n      }\r\n      await this.initPageData(notAddBtn)\r\n    },\r\n    // 初始化页面路径\r\n    async initPageData(notAddBtn) {\r\n      let pageType = -1\r\n      // 页面 v2：-2: 课程列表; -1: 首页；：0：视频；1：音频；2：直播；3：图文；4：讨论；5：考试；6：作业；7：课堂；8：公告; 9: PPT； 20：试卷; 21： 答题卡\r\n      // 类型 v1: -12：课程列表;-11: 首页；：10：视频；11：音频；12：直播；13：图文；14：讨论；15：考试；16：作业\r\n      let item = ''\r\n      for (let i = 0; i < pageTypeList.length; i++) {\r\n        item = pageTypeList[i]\r\n        if (location.pathname.indexOf(item.k) >= 0 || location.host.indexOf(item.k) >= 0) {\r\n          pageType = item.v\r\n          const tempList = location.pathname.split('/')\r\n          if (this.platformType !== 10) {\r\n            // classroom_id\r\n            if (item.classroom_id) this.$store.commit('updateClassroomId', tempList[item.classroom_id])\r\n            // leaf_id\r\n            if (item.leaf_id) this.$store.commit('updateLeafId', tempList[item.leaf_id])\r\n            // leaf_type_id\r\n            if (item.leaf_type_id) this.$store.commit('updateLeafTypeId', tempList[item.leaf_type_id])\r\n            // courseware_id\r\n            if (item.courseware_id) this.$store.commit('updateCoursewareId', tempList[item.courseware_id])\r\n            // course_sign\r\n            if (item.course_sign) this.$store.commit('updateCourseSign', tempList[item.course_sign])\r\n          } else {\r\n            // exam_id\r\n            pageType = 20\r\n            if (item.exam_id) this.$store.commit('updateExamId', tempList[item.exam_id])\r\n          }\r\n          // 单独处理下考试 /v2/web/exam/classroom_id/leaf_type_id?leaf_id=leaf_id\r\n          if (pageType === 5) {\r\n            const tempList = location.search.split(/[?\\&]/g).filter((item) => item.indexOf('leaf_id') >= 0)\r\n            if (tempList && tempList.length > 0) {\r\n              this.$store.commit('updateLeafId', tempList[0].split('=')[1])\r\n            }\r\n          }\r\n          break\r\n        }\r\n      }\r\n      this.$store.commit('updatePageType', pageType)\r\n      // 最优先排除考试页面\r\n      if (pageType === 20) {\r\n        this.$store.commit('updatePageLevel', -1)\r\n      } else {\r\n        if (pageType >= 0) this.$store.commit('updatePageLevel', 3)\r\n      }\r\n      // 课程列表页面\r\n      if (pageType === -2 || pageType === -12) this.$store.commit('updatePageLevel', 2)\r\n      // 首页\r\n      if (pageType === -1 || pageType === -11) this.$store.commit('updatePageLevel', 1)\r\n      switch (pageType) {\r\n        case 0:\r\n          break\r\n      }\r\n      if (pageType === 0 || pageType === 10) {\r\n        // 视频详情页面\r\n        this.windowType = 'video'\r\n      } else if (pageType === 9) {\r\n        // PPT详情页面\r\n        this.windowType = 'ppt'\r\n      } else if (pageType === 3 || pageType === 13) {\r\n        // PPT详情页面\r\n        this.windowType = 'tuwen'\r\n      } else if (pageType === 5 || pageType === 15) {\r\n        // 考试页面\r\n        this.windowType = 'kaoshi'\r\n      } else if (pageType === 6 || pageType === 16) {\r\n        // 习题页面\r\n        this.windowType = 'zuoye'\r\n      } else if (pageType === 20) {\r\n        // 试卷页面\r\n        this.windowType = 'shijuan'\r\n      } else if (pageType === 21 || pageType === 22) {\r\n        // 答题卡页面\r\n        this.windowType = 'datika'\r\n      } else {\r\n        this.windowType = 'main'\r\n      }\r\n      if (!notAddBtn) {\r\n        this.$nextTick(async () => {\r\n          // 查询用户信息-登录\r\n          await this.$store.dispatch('loadUserInfo')\r\n        })\r\n      }\r\n    },\r\n    // 增加脚本设置按钮\r\n    addBtn() {\r\n      let ulDom = {}\r\n      let liDom = {}\r\n      if ((!document.getElementsByClassName('left__menu') || document.getElementsByClassName('left__menu').length <= 0) && (!document.getElementsByClassName('left-nav') || document.getElementsByClassName('left-nav').length <= 0)) {\r\n        setTimeout(() => {\r\n          this.addBtn()\r\n        }, 1000)\r\n        return false\r\n      }\r\n      // 增加按钮存在校验\r\n      if (document.getElementById(getBrowserFingerprint()) && document.getElementById(getBrowserFingerprint()).children && document.getElementById(getBrowserFingerprint()).children.length > 0) return\r\n      switch (this.platformType) {\r\n        case 1:\r\n          ulDom = document.getElementsByClassName('left-nav')[0].getElementsByClassName('nav-item nav-hover')\r\n          liDom = ulDom[ulDom.length - 1].cloneNode(true)\r\n          liDom.classList.remove('active')\r\n          // liDom.removeAttribute('id')\r\n          liDom.setAttribute('id', getBrowserFingerprint())\r\n          liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi')\r\n          liDom.getElementsByTagName('div')[0].innerText = '挂机脚本'\r\n          liDom.onclick = this.showSettingPanel\r\n          document.getElementsByClassName('user-wrapper')[0].before(liDom)\r\n          break\r\n        case 2:\r\n          ulDom = document.getElementsByClassName('left__menu')[0].getElementsByTagName('ul')[0]\r\n          liDom = ulDom.children[ulDom.children.length - 1].cloneNode(true)\r\n          liDom.setAttribute('id', getBrowserFingerprint())\r\n          liDom.getElementsByTagName('use')[0].setAttribute('xlink:href', '#icon--shezhi')\r\n          liDom.getElementsByTagName('span')[0].innerText = '挂机脚本'\r\n          liDom.onclick = this.showSettingPanel\r\n          ulDom.appendChild(liDom)\r\n          break\r\n      }\r\n    },\r\n    showSettingPanel() {\r\n      // 上一次打开面板时的网页URL-这里判断一下用户是否切换了网页 - 从而判断是否需要重新计算\r\n      if (!this.oldLocationHref || this.oldLocationHref !== location.pathname) {\r\n        // 只有这种情况，才需要重新计算相关\r\n        this.initPage(true)\r\n      }\r\n      this.$store.commit('showSettingDrawer')\r\n    },\r\n    // 每隔1秒钟，检测一下window改变情况\r\n    checkCurrentUrl() {\r\n      if (this.oldLocationHref !== location.pathname) {\r\n        if (this.oldLocationHref) this.$store.commit('updateUrlChangeFlug')\r\n        this.oldLocationHref = location.pathname\r\n        // 重新初始化一下页面\r\n        this.initPage(true)\r\n      }\r\n      setTimeout(() => {\r\n        this.checkCurrentUrl()\r\n      }, 1000)\r\n    },\r\n    loopShowGuide() {\r\n      if (!document.getElementById(getBrowserFingerprint())) {\r\n        setTimeout(() => {\r\n          this.loopShowGuide()\r\n        }, 500)\r\n        return false\r\n      }\r\n      // 创建一个引导\r\n      this.localDriver = this.$guide.show([\r\n        {\r\n          element: '#'+getBrowserFingerprint(),\r\n          popover: {\r\n            title: '点击这里开始',\r\n            description: '挂机脚本按钮已迁移到这里了~!',\r\n            position: 'right-center'\r\n          }\r\n        }\r\n      ])\r\n    },\r\n    clearUploadData() {\r\n      if (localStorage.getItem('clearUploadData') != clearUploadData) {\r\n        // 删除数据上传\r\n        localStorage.removeItem(storageUploadKey + this.userInfo.userNumber)\r\n        // 设定版本\r\n        localStorage.setItem('clearUploadData', clearUploadData)\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    if (location.pathname.indexOf('discussion') >= 0 || location.pathname.indexOf('v/quiz/quiz_') >= 0 || location.pathname === '' || location.pathname === '/') {\r\n      return false\r\n    }\r\n    this.$nextTick(async () => {\r\n      this.oldLocationHref = location.pathname\r\n      // 初始化页面\r\n      await this.initPage()\r\n\r\n      if (this.windowType !== 'shijuan') {\r\n        // 初始化设置数据\r\n        this.$store.commit('initSettingData')\r\n        // 循环检测\r\n        this.checkCurrentUrl()\r\n        setTimeout(() => {\r\n          // 创建一个引导\r\n          if (!localStorage.getItem('btnGuideIsShow')) {\r\n            this.loopShowGuide()\r\n          }\r\n        }, 1000)\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n#appTest {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  /* z-index: 6999; */\r\n  pointer-events: none;\r\n}\r\n.binding-dialog {\r\n  pointer-events: auto;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]);

 // exports

@@ -24740,7 +24774,8 @@
                                 ),
                                 _vm._v(" "),
                                 _c("el-input-number", {
-                                  attrs: { min: 1, max: _vm.isLogin ? 99 : 4 },
+                                  // 无论是否登录max均为99
+                                  attrs: { min: 1, max: 99 },
                                   model: {
                                     value: _vm.windowSetForm.count,
                                     callback: function($$v) {

```
